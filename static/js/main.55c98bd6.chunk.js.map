{"version":3,"sources":["components/Spinner.js","store/actions.js","helpers.js","store/interactions.js","store/selectors.js","components/Settings.js","components/Home.js","components/market/DepthChart.js","components/market/MarketOrderBook.js","components/market/PriceChart.config.js","components/market/PriceChart.js","components/market/MarketTrades.js","components/buy/SellOrders.js","components/buy/NewBuyOrder.js","components/sell/BuyOrders.js","components/sell/NewSellOrder.js","components/portfolio/PortfolioOrders.js","components/portfolio/PortfolioTrades.js","components/funds/FundsBalance.js","components/Routes.js","components/TopNav.js","components/SideNav.js","components/App.js","store/reducers.js","store/configureStore.js","serviceWorker.js","index.js"],"names":["type","className","role","web3AccountLoaded","account","tokenAdded","token","tokenSelected","exchangeEtherBalanceLoaded","balance","exchangeTokenBalanceLoaded","cancelledOrdersLoaded","cancelledOrders","filledOrdersLoaded","filledOrders","allOrdersLoaded","allOrders","ETHER_ADDRESS","GREEN","RED","weiToEther","wei","weiToTokens","tokenDecimals","etherToWei","e","toString","tokensToWei","t","formatEtherBalance","Math","round","formatTokenBalance","decimals","loadWeb3","dispatch","web3","Web3","window","givenProvider","connection","loadAccount","a","eth","getAccounts","accounts","loadExchange","networkId","Contract","Exchange","abi","networks","address","exchange","contract","subscribeToExchangeEvents","loadAllTokens","console","log","getPastEvents","fromBlock","tokenStream","map","event","returnValues","events","TokenAdded","error","subscribeToTokenEvents","tokenAddress","Cancel","filter","tokenGet","tokenGive","order","Trade","Deposit","Withdraw","Order","loadAllOrders","cancelStream","tradeStream","orderStream","addToken","tokens","findIndex","Token","tokenContract","checkContractFunction","methods","call","name","symbol","options","send","from","functionSignature","undefined","selectToken","index","loadBalances","getBalance","etherBalance","balanceOf","exchangeEtherBalance","exchangeTokenBalance","fillOrder","id","on","hash","alert","sideNavShowSelector","createSelector","state","get","s","accountSelector","web3Selector","w","exchangeLoaded","exchangeSelector","el","tokenListSelector","tokenSelector","tokenLoadingSelector","contractsLoadedSelector","balancesLoadingSelector","l","etherBalanceSelector","tokenBalanceSelector","exchangeEtherBalanceSelector","exchangeTokenBalanceSelector","etherDepositAmountSelector","etherWithdrawAmountSelector","tokenDepositAmountSelector","tokenWithdrawAmountSelector","buyOrderSelector","o","sellOrderSelector","col","orders","filledOrdersLoadedSelector","fol","filledOrdersSelector","sort","b","timestamp","decorateFilledOrders","previousOrder","decorateOrder","decorateFilledOrder","etherAmount","tokenAmount","amountGive","amountGet","tokenPrice","formattedTimestamp","moment","unix","format","tokenPriceClass","orderId","openOrders","all","filled","cancelled","reject","orderFilled","some","orderCancelled","orderBookLoaded","orderBookLoadedSelector","obl","orderBookSelector","decorateOrderBookOrders","groupBy","buyOrders","sellOrders","decorateOrderBookOrder","orderType","orderTypeClass","orderFillAction","depthChartSelector","decorateWithVolume","concat","value","prevPrice","res","i","length","volume","totalvolume","dp","push","myFilledOrdersLoadedSelector","myFilledOrdersSelector","user","userFill","decorateMyFilledOrders","decorateMyFilledOrder","orderSign","myOpenOrdersLoadedSelector","myOpenOrdersSelector","decorateMyOpenOrders","decorateMyOpenOrder","priceChartLoadedSelector","loaded","priceChartSelector","secondLastOrder","lastOrder","slice","lastPrice","lastPriceChange","series","data","buildGraphData","startOf","Object","keys","hour","group","open","close","low","minBy","high","maxBy","x","Date","y","orderCancellingSelector","c","orderFillingSelector","f","Settings","this","loadBlockchainData","props","tokenList","Form","noValidate","onSubmit","preventDefault","tokenAddressInput","document","getElementById","Row","Group","as","Col","Control","autoFocus","placeholder","controlId","Button","variant","width","key","showTokens","Component","connect","Home","am4core","am4themes_animated","DepthChart","chart","am4charts","numberFormatter","numberFormat","xAxis","xAxes","dataFields","category","renderer","minGridDistance","title","text","priceTitle","labels","template","fill","yAxis","yAxes","volumeTitle","bidValueSeries","categoryX","valueY","strokeWidth","stroke","fillOpacity","tooltipText","askValueSeries","bidVolumeSeries","askVolumeSeries","cursor","dispose","oldProps","JSON","stringify","style","height","MarketOrderBook","buys","orderBook","Container","sm","depthChart","showDepthChart","showOrders","showOrderBook","Spinner","OverlayTrigger","placement","overlay","Tooltip","onClick","renderOrder","orderFilling","chartOptions","animations","enabled","toolbar","show","tooltip","theme","fontSize","fontFamily","formatter","marker","items","display","fixed","position","offsetX","offsetY","xaxis","colors","cssClass","yaxis","minWidth","maxWidth","color","rotate","PriceChart","priceChartLoaded","showPriceChart","priceChart","priceSymbol","priceChange","tokenLoading","MarketTrades","contractsLoaded","SellOrders","showOrderTable","NewBuyOrder","showForm","buyOrder","showBuyTotal","amount","price","makeOrder","makeBuyOrder","onChange","target","required","making","BuyOrders","NewSellOrder","sellOrder","showSellTotal","makeSellOrder","PortfolioOrders","myOpenOrdersLoaded","myOpenOrders","cellspacing","cancelOrder","showMyOpenOrders","orderCancelling","PortfolioTrades","myFilledOrdersLoaded","myFilledOrders","showMyFilledOrders","FundsBalance","tokenBalance","etherDepositAmount","etherWithdrawAmount","tokenDepositAmount","tokenWithdrawAmount","Tabs","defaultActiveKey","Tab","eventKey","depositEther","approve","depositToken","withdrawEther","withdrawToken","balancesLoading","Routes","path","exact","component","TopNav","toggleSidenav","bind","CustomToggle","React","forwardRef","ref","children","href","CustomMenu","labeledBy","useState","setValue","aria-labelledby","FormControl","Children","toArray","child","toLowerCase","startsWith","to","Dropdown","Toggle","Menu","Item","onSelect","eKey","renderTokenSelect","data-toggle","aria-haspopup","aria-expanded","src","Identicon","alt","Navigation","data-target","aria-controls","data-parent","App","ethereum","enable","location","reload","net","getNetworkType","network","getId","sideNavShow","SideNav","process","rootReducer","combineReducers","app","action","loggerMiddleware","createLogger","middleware","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","preloadedState","Boolean","hostname","match","ReactDOM","render","store","createStore","applyMiddleware","basename","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.55c98bd6.chunk.js","sourcesContent":["import React from 'react'\n\nexport default function ({ type }) {\n  if (type === 'table') {\n    return(<tbody className=\"spinner-grow text-dark text-center\"></tbody>)\n  } else {\n    return(\n    \t<div className=\"d-flex justify-content-center\">\n\t\t  <div className=\"spinner-grow text-dark text-center\" role=\"status\">\n\t\t    <span className=\"sr-only\">Loading...</span>\n\t\t  </div>\n\t\t</div>\n    )\n  }\n}","export function web3Loaded(connection) {\n\treturn {\n\t\ttype: 'WEB3_LOADED',\n\t\tconnection\n\t}\n}\n\nexport function web3AccountLoaded(account) {\n\treturn {\n\t\ttype: 'WEB3_ACCOUNT_LOADED',\n\t\taccount\n\t}\n}\n\nexport function exchangeLoaded(contract) {\n\treturn {\n\t\ttype: 'EXCHANGE_LOADED',\n\t\tcontract\n\t}\n}\n\nexport function tokenAdded(token) {\n\treturn {\n\t\ttype: 'TOKEN_ADDED',\n\t\ttoken\n\t}\n}\n\nexport function selectingToken() {\n\treturn {\n\t\ttype: 'SELECTING_TOKEN'\n\t}\n}\n\nexport function tokenSelected(token) {\n\treturn {\n\t\ttype: 'TOKEN_SELECTED',\n\t\ttoken\n\t}\n}\n\nexport function etherBalanceLoaded(balance) {\n\treturn {\n\t\ttype: 'ETHER_BALANCE_LOADED',\n\t\tbalance\n\t}\n}\n\nexport function tokenBalanceLoaded(balance) {\n\treturn {\n\t\ttype: 'TOKEN_BALANCE_LOADED',\n\t\tbalance\n\t}\n}\n\nexport function exchangeEtherBalanceLoaded(balance) {\n\treturn {\n\t\ttype: 'EXCHANGE_ETHER_BALANCE_LOADED',\n\t\tbalance\n\t}\n}\n\nexport function exchangeTokenBalanceLoaded(balance) {\n\treturn {\n\t\ttype: 'EXCHANGE_TOKEN_BALANCE_LOADED',\n\t\tbalance\n\t}\n}\n\nexport function balancesLoading() {\n\treturn {\n\t\ttype: 'BALANCES_LOADING'\n\t}\n}\n\nexport function balancesLoaded() {\n\treturn {\n\t\ttype: 'BALANCES_LOADED'\n\t}\n}\n\nexport function etherDepositAmountChanged(amount) {\n\treturn {\n\t\ttype: 'ETHER_DEPOSIT_AMOUNT_CHANGED',\n\t\tamount\n\t}\n}\n\nexport function etherWithdrawAmountChanged(amount) {\n\treturn {\n\t\ttype: 'ETHER_WITHDRAW_AMOUNT_CHANGED',\n\t\tamount\n\t}\n}\n\nexport function tokenDepositAmountChanged(amount) {\n\treturn {\n\t\ttype: 'TOKEN_DEPOSIT_AMOUNT_CHANGED',\n\t\tamount\n\t}\n}\n\nexport function tokenWithdrawAmountChanged(amount) {\n\treturn {\n\t\ttype: 'TOKEN_WITHDRAW_AMOUNT_CHANGED',\n\t\tamount\n\t}\n}\n\nexport function buyOrderAmountChanged(amount) {\n\treturn {\n\t\ttype: 'BUY_ORDER_AMOUNT_CHANGED',\n\t\tamount\n\t}\n}\n\nexport function buyOrderPriceChanged(price) {\n\treturn {\n\t\ttype: 'BUY_ORDER_PRICE_CHANGED',\n\t\tprice\n\t}\n}\n\nexport function buyOrderMaking() {\n\treturn {\n\t\ttype: 'BUY_ORDER_MAKING'\n\t}\n}\n\nexport function sellOrderAmountChanged(amount) {\n\treturn {\n\t\ttype: 'SELL_ORDER_AMOUNT_CHANGED',\n\t\tamount\n\t}\n}\n\nexport function sellOrderPriceChanged(price) {\n\treturn {\n\t\ttype: 'SELL_ORDER_PRICE_CHANGED',\n\t\tprice\n\t}\n}\n\nexport function sellOrderMaking() {\n\treturn {\n\t\ttype: 'SELL_ORDER_MAKING'\n\t}\n}\n\nexport function orderMade(order) {\n\treturn {\n\t\ttype: 'ORDER_MADE',\n\t\torder\n\t}\n}\n\nexport function cancelledOrdersLoaded(cancelledOrders) {\n\treturn {\n\t\ttype: 'CANCELLED_ORDERS_LOADED',\n\t\tcancelledOrders\n\t}\n}\n\n\nexport function filledOrdersLoaded(filledOrders) {\n\treturn {\n\t\ttype: 'FILLED_ORDERS_LOADED',\n\t\tfilledOrders\n\t}\n}\n\n\nexport function allOrdersLoaded(allOrders) {\n\treturn {\n\t\ttype: 'ALL_ORDERS_LOADED',\n\t\tallOrders\n\t}\n}\n\nexport function orderCancelling() {\n\treturn {\n\t\ttype: 'ORDER_CANCELLING'\n\t}\n}\n\nexport function orderCancelled(order) {\n\treturn {\n\t\ttype: 'ORDER_CANCELLED',\n\t\torder\n\t}\n}\n\nexport function orderFilling() {\n\treturn {\n\t\ttype: 'ORDER_FILLING'\n\t}\n}\n\nexport function orderFilled(order) {\n\treturn {\n\t\ttype: 'ORDER_FILLED',\n\t\torder\n\t}\n}\n\nexport function sideNavShowHideToggled() {\n\treturn {\n\t\ttype: 'SIDE_NAV_SHOW_HIDE_TOGGLED'\n\t}\n}","export const ETHER_ADDRESS = '0x0000000000000000000000000000000000000000'\nexport const DECIMALS = 18\n\nexport const GREEN = 'success'\nexport const RED = 'danger'\n\nexport const weiToEther = (wei) => {\n\tif (wei) {\n\t\treturn (wei / (10 ** DECIMALS))\n\t}\n}\n\nexport const weiToTokens = (wei, tokenDecimals) => {\n\tif (wei) {\n\t\treturn (wei / (10 ** tokenDecimals))\n\t}\n}\n\nexport const etherToWei = (e) => {\n\tif (e) {\n\t\treturn (e * (10 ** DECIMALS)).toString()\n\t}\n}\n\nexport const tokensToWei = (t, tokenDecimals) => {\n\tif (t) {\n\t\treturn (t * (10 ** tokenDecimals)).toString()\n\t}\n}\n\nexport const formatEtherBalance = (balance) => {\n\tconst precision = 100\n\tbalance = weiToEther(balance)\n\tbalance = Math.round(balance * precision) / precision\n\treturn balance\n}\n\nexport const formatTokenBalance = (balance, decimals) => {\n\tconst precision = 100\n\tbalance = weiToTokens(balance, decimals)\n\tbalance = Math.round(balance * precision) / precision\n\treturn balance\n}","import Web3 from 'web3'\nimport Exchange from '../contracts/abis/Exchange.json'\nimport Token from '../contracts/abis/Token18.json'\nimport { \n\tweb3Loaded,\n\tweb3AccountLoaded,\n\texchangeLoaded,\n\tnetworkIdSet,\n\ttokenAdded,\n\tselectingToken,\n\ttokenSelected,\n\tetherBalanceLoaded,\n\ttokenBalanceLoaded,\n\texchangeEtherBalanceLoaded,\n\texchangeTokenBalanceLoaded,\n\tbalancesLoading,\n\tbalancesLoaded,\n\tbuyOrderMaking,\n\tsellOrderMaking,\n\torderMade,\n\tcancelledOrdersLoaded,\n\tfilledOrdersLoaded,\n\tallOrdersLoaded,\n\torderCancelling,\n\torderCancelled,\n\torderFilling,\n\torderFilled\n} from './actions.js'\nimport { ETHER_ADDRESS, tokensToWei, etherToWei } from '../helpers'\n\nexport const loadWeb3 = (dispatch) => {\n\tconst web3 = new Web3(window['ethereum'] || Web3.givenProvider || 'http://127.0.0.1:7545');\n\tdispatch(web3Loaded(web3))\n\treturn web3\n}\n\nexport const loadAccount = async (web3, dispatch) => {\n\tconst accounts = await web3.eth.getAccounts()\n\tconst account = accounts[0]\n\tdispatch(web3AccountLoaded(account))\n\treturn account\n}\n\nexport const loadExchange = async (web3, networkId, dispatch) => {\n\ttry {\n\t\tconst exchange = await new web3.eth.Contract(Exchange.abi, Exchange.networks[networkId].address)\n\t\tdispatch(exchangeLoaded(exchange))\n\t\tsubscribeToExchangeEvents(exchange, dispatch)\n\n\t\tawait loadAllTokens(exchange, dispatch)\n\t\treturn exchange\n\t} catch (error) {\n\t\tconsole.log('Contract not deployed to the current network', error)\n\t\treturn null\n\t}\n}\n\nexport const loadAllTokens = async (exchange, dispatch) => {\n\ttry {\n\t\tconst tokenStream = await exchange.getPastEvents('TokenAdded', {fromBlock: 0})\n\t\tconst tokens = tokenStream.map((event) => dispatch(tokenAdded(event.returnValues)))\n\t} catch (error) {\n\t\tconsole.log('Could not get token stream')\n\t\treturn null\n\t}\n}\n\nexport const subscribeToExchangeEvents = async (exchange, dispatch) => {\n\texchange.events.TokenAdded({}, (error, event) => {\n\t\tdispatch(tokenAdded(event.returnValues))\n\t})\n}\n\nexport const subscribeToTokenEvents = async (tokenAddress, exchange, dispatch) => {\n\texchange.events.Cancel({filter: {tokenGet: [tokenAddress, ETHER_ADDRESS], tokenGive: [tokenAddress, ETHER_ADDRESS]}}, (error, event) => {\n\t\tdispatch(orderCancelled(event.returnValues))\n\t})\n\texchange.events.Trade({filter: {tokenGet: [tokenAddress, ETHER_ADDRESS], tokenGive: [tokenAddress, ETHER_ADDRESS]}}, (error, event) => {\n\t\tdispatch(orderFilled(event.returnValues))\n\t})\n\texchange.events.Deposit({filter: {token: [tokenAddress, ETHER_ADDRESS]}}, (error, event) => {\n\t\tdispatch(balancesLoaded())\n\t})\n\texchange.events.Withdraw({filter: {token: [tokenAddress, ETHER_ADDRESS]}}, (error, event) => {\n\t\tdispatch(balancesLoaded())\n\t})\n\texchange.events.Order({filter: {tokenGet: [tokenAddress, ETHER_ADDRESS], tokenGive: [tokenAddress, ETHER_ADDRESS]}}, (error, event) => {\n\t\tdispatch(orderMade(event.returnValues))\n\t})\n}\n\nexport const loadAllOrders = async (tokenAddress, exchange, dispatch) => {\n\ttry {\n\t\tconst cancelStream = await exchange.getPastEvents(\n\t\t\t'Cancel', \n\t\t\t{\n\t\t\t\tfilter: {tokenGet: [tokenAddress, ETHER_ADDRESS], tokenGive: [tokenAddress, ETHER_ADDRESS]},\n\t\t\t\tfromBlock: 0\n\t\t\t}\n\t\t)\n\t\tconst cancelledOrders = cancelStream.map((event) => event.returnValues)\n\t\tdispatch(cancelledOrdersLoaded(cancelledOrders))\n\n\t\tconst tradeStream = await exchange.getPastEvents(\n\t\t\t'Trade', \n\t\t\t{\n\t\t\t\tfilter: {tokenGet: [tokenAddress, ETHER_ADDRESS], tokenGive: [tokenAddress, ETHER_ADDRESS]},\n\t\t\t\tfromBlock: 0\n\t\t\t}\n\t\t)\n\t\tconst filledOrders = tradeStream.map((event) => event.returnValues)\n\t\tdispatch(filledOrdersLoaded(filledOrders))\n\n\t\tconst orderStream = await exchange.getPastEvents(\n\t\t\t'Order', \n\t\t\t{\n\t\t\t\tfilter: {tokenGet: [tokenAddress, ETHER_ADDRESS], tokenGive: [tokenAddress, ETHER_ADDRESS]},\n\t\t\t\tfromBlock: 0\n\t\t\t}\n\t\t)\n\t\tconst allOrders = orderStream.map((event) => event.returnValues)\n\t\tdispatch(allOrdersLoaded(allOrders))\n\t} catch (error) {\n\t\tconsole.log('Could not get order streams')\n\t\treturn null\n\t}\n}\n\nexport const addToken = async (tokenAddress, tokens, web3, account, exchange, dispatch) => {\n\ttry {\n\t\t// check if not already present\n\t\tconst index = tokens.findIndex(token => token.tokenAddress === tokenAddress)\n\t\tif (index !== -1) {\n\t\t\tthrow \"allready present\" \n\t\t}\n\n\t\tconst tokenContract = await new web3.eth.Contract(Token.abi, tokenAddress)\n\n\t\t// check if really ERC20\n\t\tcheckContractFunction(tokenContract, 'name()') // optional, but we need it\n\t\tcheckContractFunction(tokenContract, 'symbol()') // optional, but we need it\n\t\tcheckContractFunction(tokenContract, 'decimals()') // optional, but we need it\n\t\tcheckContractFunction(tokenContract, 'totalSupply()')\n\t\tcheckContractFunction(tokenContract, 'balanceOf(address)')\n\t\tcheckContractFunction(tokenContract, 'transfer(address,uint256)')\n\t\tcheckContractFunction(tokenContract, 'transferFrom(address,address,uint256)')\n\t\tcheckContractFunction(tokenContract, 'approve(address,uint256)')\n\t\tcheckContractFunction(tokenContract, 'allowance(address,address)')\n\n\t\tconst decimals = await tokenContract.methods.decimals().call()\n\t\tconst name = await tokenContract.methods.name().call()\n\t\tconst symbol = await tokenContract.methods.symbol().call()\n\n\t\texchange.methods.addToken(tokenContract.options.address, name, symbol, decimals).send({from: account})\n\t} catch (error) {\n\t\tconsole.log('Could not add new token:', error)\n\t}\n}\n\nconst checkContractFunction = (contract, functionSignature) => {\n\tif (contract.methods[functionSignature] === undefined) {\n\t\tthrow \"Not an ERC20 token: \" + functionSignature\n\t}\n}\n\nexport const selectToken = async (tokenAddress, tokens, account, exchange, web3, dispatch) => {\n\ttry {\n\t\tdispatch(selectingToken())\n\n\t\tconst index = tokens.findIndex(token => token.tokenAddress === tokenAddress)\n\t\tlet token = tokens[index]\n\t\tconst tokenContract = await new web3.eth.Contract(Token.abi, token.tokenAddress)\n\t\ttoken.contract = tokenContract\n\n\t\tawait loadBalances(account, exchange, token, web3, dispatch)\n\t\tawait loadAllOrders(tokenAddress, exchange, dispatch)\n\t\tsubscribeToTokenEvents(tokenAddress, exchange, dispatch)\n\n\t\tdispatch(tokenSelected(token))\n\t} catch (error) {\n\t\tconsole.log('Could not add new token', error)\n\t}\n}\n\nexport const loadBalances = async (account, exchange, token, web3, dispatch) => {\n\tdispatch(balancesLoading())\n\t\n\tconst etherBalance = await web3.eth.getBalance(account)\n\tdispatch(etherBalanceLoaded(etherBalance))\n\n\t//const tokenBalance = await token.contract.methods.balanceOf(account).call()\n\t//dispatch(tokenBalanceLoaded(tokenBalance))\n\n\tconst exchangeEtherBalance = await exchange.methods.balanceOf(ETHER_ADDRESS, account).call()\n\tdispatch(exchangeEtherBalanceLoaded(exchangeEtherBalance))\n\n\tconst exchangeTokenBalance = await exchange.methods.balanceOf(token.contract.options.address, account).call()\n\tdispatch(exchangeTokenBalanceLoaded(exchangeTokenBalance))\n\n\tdispatch(balancesLoaded())\n}\n\nexport const depositEther = (amount, account, web3, exchange, dispatch) => {\n\texchange.methods.depositEther().send({from: account, value: etherToWei(amount)})\n\t.on('transactionHash', (hash) => {\n\t\tdispatch(balancesLoading())\n\t})\n\t.on('error', (error) => {\n\t\tconsole.log('Could not deposit ether', error)\n\t\twindow.alert('Could not deposit ether')\n\t})\n}\n\nexport const withdrawEther = (amount, account, web3, exchange, dispatch) => {\n\texchange.methods.withdrawEther(etherToWei(amount)).send({from: account})\n\t.on('transactionHash', (hash) => {\n\t\tdispatch(balancesLoading())\n\t})\n\t.on('error', (error) => {\n\t\tconsole.log('Could not withdraw ether', error)\n\t\twindow.alert('Could not withdraw ether')\n\t})\n}\n\nexport const depositToken = (amount, account, web3, token, exchange, dispatch) => {\n\tamount = tokensToWei(amount, token.decimals)\n\n\ttoken.contract.methods.approve(exchange.options.address, amount).send({from: account})\n\t.on('transactionHash', (hash) => {\n\t\texchange.methods.depositToken(token.contract.options.address, amount).send({from: account})\n\t\t.on('transactionHash', (hash) => {\n\t\t\tdispatch(balancesLoading())\n\t\t})\n\t})\n\t.on('error', (error) => {\n\t\tconsole.log('Could not approve token deposit', error)\n\t\twindow.alert('Could not approve token deposit')\n\t})\n}\n\nexport const withdrawToken = (amount, account, web3, token, exchange, dispatch) => {\n\texchange.methods.withdrawToken(token.contract.options.address, tokensToWei(amount, token.decimals)).send({from: account})\n\t.on('transactionHash', (hash) => {\n\t\tdispatch(balancesLoading())\n\t})\n\t.on('error', (error) => {\n\t\tconsole.log('Could not withdraw token', error)\n\t\twindow.alert('Could not withdraw token')\n\t})\n}\n\nexport const makeBuyOrder = (order, account, web3, token, exchange, dispatch) => {\n\tconst tokenGet = token.contract.options.address\n\tconst amountGet = tokensToWei(order.amount, token.decimals)\n\tconst tokenGive = ETHER_ADDRESS\n\tconst amountGive = etherToWei((order.amount * order.price).toString())\n\n\texchange.methods.makeOrder(tokenGet, amountGet, tokenGive, amountGive).send({from: account})\n\t.on('transactionHash', (hash) => {\n\t\tdispatch(buyOrderMaking())\n\t})\n\t.on('error', (error) => {\n\t\tconsole.log('Could not make buy order', error)\n\t\twindow.alert('Could not make buy order')\n\t})\n}\n\nexport const makeSellOrder = (order, account, web3, token, exchange, dispatch) => {\n\tconst tokenGet = ETHER_ADDRESS\n\tconst amountGet = etherToWei((order.amount * order.price).toString())\n\tconst tokenGive = token.contract.options.address\n\tconst amountGive = tokensToWei(order.amount, token.decimals)\n\n\texchange.methods.makeOrder(tokenGet, amountGet, tokenGive, amountGive).send({from: account})\n\t.on('transactionHash', (hash) => {\n\t\tdispatch(sellOrderMaking())\n\t})\n\t.on('error', (error) => {\n\t\tconsole.log('Could not make sell order', error)\n\t\twindow.alert('Could not make sell order')\n\t})\n}\n\nexport const cancelOrder = (order, account, exchange, dispatch) => {\n\texchange.methods.cancelOrder(order.id).send({from: account})\n\t.on('transactionHash', (hash) => {\n\t\tdispatch(orderCancelling())\n\t})\n\t.on('error', (error) => {\n\t\tconsole.log('Could not cancel order', error)\n\t\twindow.alert('Could not cancel order')\n\t})\n}\n\nexport const fillOrder = (order, account, exchange, dispatch) => {\n\texchange.methods.fillOrder(order.id).send({from: account})\n\t.on('transactionHash', (hash) => {\n\t\tdispatch(orderFilling())\n\t})\n\t.on('error', (error) => {\n\t\tconsole.log('Could not fill order', error)\n\t\twindow.alert('Could not fill order')\n\t})\n}","import { get, reject, groupBy, minBy, maxBy } from 'lodash'\nimport { createSelector } from 'reselect'\nimport moment from 'moment'\nimport { ETHER_ADDRESS, GREEN, RED, formatEtherBalance, formatTokenBalance, weiToEther, weiToTokens } from '../helpers'\nimport { tokenSelected } from './actions'\n\nconst sideNavShow = (state) => get(state, 'app.sideNavShow', true)\nexport const sideNavShowSelector = createSelector(sideNavShow, s => s)\n\nconst account = (state) => get(state, 'web3.account')\nexport const accountSelector = createSelector(account, a => a)\n\nconst web3 = state => get(state, 'web3.connection')\nexport const web3Selector = createSelector(web3, w => w)\n\nconst exchangeLoaded = state => get(state, 'exchange.loaded', false)\nexport const exchangeLoadedSelector = createSelector(exchangeLoaded, el => el)\n\nconst exchange = state => get(state, 'exchange.contract')\nexport const exchangeSelector = createSelector(exchange, e => e)\n\nconst tokenList = state => get(state, 'exchange.tokens.data', [])\nexport const tokenListSelector = createSelector(tokenList, t => t)\n\nconst token = state => get(state, 'exchange.token', null)\nexport const tokenSelector = createSelector(token, t => t)\n\nconst tokenLoading = state => get(state, 'exchange.tokenLoading', true)\nexport const tokenLoadingSelector = createSelector(tokenLoading, t => t)\n\nexport const contractsLoadedSelector = createSelector(\n\texchangeLoaded,\n\ttoken,\n\t(el, t) => (el && t !== null)\n)\n\nconst balancesLoading = state => get(state, 'exchange.balancesLoading', true)\nexport const balancesLoadingSelector = createSelector(balancesLoading, l => l)\n\nconst etherBalance = state => get(state, 'web3.balance')\nexport const etherBalanceSelector = createSelector(\n\tetherBalance, \n\t(balance) => {\n\t\treturn formatEtherBalance(balance)\n\t})\n\nconst tokenBalance = state => get(state, 'exchange.tokenBalance')\nexport const tokenBalanceSelector = createSelector(\n\ttokenBalance, \n\ttoken,\n\t(balance, token) => {\n\t\tif (!token || !balance) {\n\t\t\treturn null\n\t\t}\n\t\treturn formatTokenBalance(balance, token.decimals)\n\t})\n\nconst exchangeEtherBalance = state => get(state, 'exchange.exchangeEtherBalance')\nexport const exchangeEtherBalanceSelector = createSelector(\n\texchangeEtherBalance, \n\t(balance) => {\n\t\treturn formatEtherBalance(balance)\n\t})\n\nconst exchangeTokenBalance = state => get(state, 'exchange.exchangeTokenBalance')\nexport const exchangeTokenBalanceSelector = createSelector(\n\texchangeTokenBalance,\n\ttoken, \n\t(balance, token) => {\n\t\tif (!token || !balance) {\n\t\t\treturn null\n\t\t}\n\t\treturn formatTokenBalance(balance, token.decimals)\n\t})\n\nconst etherDepositAmount = state => get(state, 'exchange.etherDepositAmount', null)\nexport const etherDepositAmountSelector = createSelector(etherDepositAmount, a => a)\n\nconst etherWithdrawAmount = state => get(state, 'exchange.etherWithdrawAmount', null)\nexport const etherWithdrawAmountSelector = createSelector(etherWithdrawAmount, a => a)\n\nconst tokenDepositAmount = state => get(state, 'exchange.tokenDepositAmount', null)\nexport const tokenDepositAmountSelector = createSelector(tokenDepositAmount, a => a)\n\nconst tokenWithdrawAmount = state => get(state, 'exchange.tokenWithdrawAmount', null)\nexport const tokenWithdrawAmountSelector = createSelector(tokenWithdrawAmount, a => a)\n\nconst buyOrder = state => get(state, 'exchange.buyOrder', {})\nexport const buyOrderSelector = createSelector(buyOrder, o => o)\n\nconst sellOrder = state => get(state, 'exchange.sellOrder', {})\nexport const sellOrderSelector = createSelector(sellOrder, o => o)\n\n// Cancelled orders\nconst cancelledOrdersLoaded = state => get(state, 'exchange.cancelledOrders.loaded', false)\nexport const cancelledOrdersLoadedSelector = createSelector(cancelledOrdersLoaded, col => col)\n\nconst cancelledOrders = state => get(state, 'exchange.cancelledOrders.data', [])\nexport const cancelledOrdersSelector = createSelector(\n\tcancelledOrders,\n\t(orders) => {\n\t\tconsole.log(orders)\n\t}\n)\n\n// Filled orders\nconst filledOrdersLoaded = state => get(state, 'exchange.filledOrders.loaded', false)\nexport const filledOrdersLoadedSelector = createSelector(filledOrdersLoaded, fol => fol)\n\nconst filledOrders = state => get(state, 'exchange.filledOrders.data', [])\nexport const filledOrdersSelector = createSelector(\n\tfilledOrders,\n\ttoken,\n\t(orders, token) => {\n\t\t// sort ascending for price comparison\n\t\torders = orders.sort((a, b) => a.timestamp - b.timestamp)\n\t\torders = decorateFilledOrders(orders, token)\n\n\t\t// sort descending for display\n\t\torders = orders.sort((a, b) => b.timestamp - a.timestamp)\n\t\treturn orders\n\t}\n)\n\nconst decorateFilledOrders = (orders, token) => {\n\tlet previousOrder = orders[0]\n\treturn orders.map((order) => {\n\t\torder = decorateOrder(order, token)\n\t\torder = decorateFilledOrder(order, previousOrder)\n\t\tpreviousOrder = order\n\t\treturn order\n\t})\n}\n\nconst decorateOrder = (order, token) => {\n\n\tlet etherAmount\n\tlet tokenAmount\n\n\tif (order.tokenGive === ETHER_ADDRESS) {\n\t\tetherAmount = order.amountGive\n\t\ttokenAmount = order.amountGet\n\t} else {\n\t\tetherAmount = order.amountGet\n\t\ttokenAmount = order.amountGive\n\t}\n\n\tetherAmount = weiToEther(etherAmount)\n\ttokenAmount = weiToTokens(tokenAmount, token ? token.decimals : 18)\n\n\tconst precision = 100000\n\tlet tokenPrice = (etherAmount / tokenAmount)\n\ttokenPrice = Math.round(tokenPrice * precision) / precision\n\n\treturn ({\n\t\t...order,\n\t\tetherAmount: etherAmount,\n\t\ttokenAmount: tokenAmount,\n\t\ttokenPrice,\n\t\tformattedTimestamp: moment.unix(order.timestamp).format('hh:mm:ss D/M/Y')\n\t})\n}\n\nconst decorateFilledOrder = (order, previousOrder) => {\n\treturn ({\n\t\t...order,\n\t\ttokenPriceClass: tokenPriceClass(order.tokenPrice, order.id, previousOrder)\n\t})\n}\n\nconst tokenPriceClass = (tokenPrice, orderId, previousOrder) => {\n\t// show green if order price higher than previous\n\t// or if its the first order\n\tif (orderId === previousOrder.id) {\n\t\treturn GREEN\n\t}\n\tif (previousOrder.tokenPrice <= tokenPrice) {\n\t\treturn GREEN\n\t} else {\n\t\treturn RED\n\t}\n}\n\n// All orders\nconst allOrdersLoaded = state => get(state, 'exchange.allOrders.loaded', false)\n\nconst allOrders = state => get(state, 'exchange.allOrders.data', [])\n\nconst openOrders = state => {\n\tconst all = allOrders(state)\n\tconst filled = filledOrders(state)\n\tconst cancelled = cancelledOrders(state)\n\n\tconst openOrders = reject(all, (order) => {\n\t\tconst orderFilled = filled.some((o) => o.id === order.id)\n\t\tconst orderCancelled = cancelled.some((o) => o.id === order.id)\n\t\treturn (orderFilled || orderCancelled)\n\t})\n\treturn openOrders\n}\n\nconst orderBookLoaded = state => allOrdersLoaded(state) && filledOrdersLoaded(state) && cancelledOrdersLoaded(state)\nexport const orderBookLoadedSelector = createSelector(orderBookLoaded, obl => obl)\n\nexport const orderBookSelector = createSelector(\n\topenOrders,\n\ttoken,\n\t(orders, token) => {\n\t\torders = decorateOrderBookOrders(orders, token)\n\t\t// group by order type\n\t\torders = groupBy(orders, 'orderType')\n\n\t\t// sort each group\n\t\tconst buyOrders = get(orders, 'buy', [])\n\t\torders = {\n\t\t\t...orders,\n\t\t\tbuyOrders: buyOrders.sort((a,b) => b.tokenPrice - a.tokenPrice)\n\t\t}\n\n\t\tconst sellOrders = get(orders, 'sell', [])\n\t\torders = {\n\t\t\t...orders,\n\t\t\tsellOrders: sellOrders.sort((a,b) => a.tokenPrice - b.tokenPrice)\n\t\t}\n\t\treturn orders\n\t}\n)\n\nconst decorateOrderBookOrders = (orders, token) => {\n\treturn orders.map((order) => {\n\t\torder = decorateOrder(order, token)\n\t\torder = decorateOrderBookOrder(order)\n\t\treturn order\n\t})\n}\n\nconst decorateOrderBookOrder = (order) => {\n\tconst orderType = order.tokenGive === ETHER_ADDRESS ? 'buy' : 'sell'\n\treturn ({\n\t\t...order,\n\t\torderType,\n\t\torderTypeClass: (orderType === 'buy' ? GREEN : RED),\n\t\torderFillAction: (orderType === 'buy' ? 'sell' : 'buy')\n\t})\n}\n\nexport const depthChartSelector = createSelector(\n\topenOrders,\n\ttoken,\n\t(orders, token) => {\n\t\torders = decorateOrderBookOrders(orders, token)\n\t\t// group by order type\n\t\torders = groupBy(orders, 'orderType')\n\n\t\t// buys are sorted descending\n\t\tconst buyOrders = decorateWithVolume('bid', get(orders, 'buy', []).sort((a,b) => b.tokenPrice - a.tokenPrice))\n\t\t// sells are sorted ascending\n\t\tconst sellOrders = decorateWithVolume('ask', get(orders, 'sell', []).sort((a,b) => a.tokenPrice - b.tokenPrice))\n\n\t\torders = {\n\t\t\torders: buyOrders.\n\t\t\t\tconcat(sellOrders).\n\t\t\t\tsort((a,b) =>  a.value - b.value)\n\t\t}\n\n\t\treturn orders\n\t}\n)\n\nconst decorateWithVolume = (type, orders) => {\n\tlet res = []\n\tlet prevPrice\n\n\tfor(var i = 0; i < orders.length; i++) {\n\t\torders[i].volume = orders[i].tokenAmount;\n        \n        if (i === 0) {\n        \torders[i].totalvolume = orders[i].tokenAmount;\n        }\n        else {\n        \tif (prevPrice === orders[i].tokenPrice) {\n        \t\torders[i].volume = orders[i-1].volume + orders[i].tokenAmount\n        \t}\n          \torders[i].totalvolume = orders[i-1].totalvolume + orders[i].tokenAmount;\n        }\n\n        // aggregate orders with the same price\n        if (prevPrice !== orders[i].tokenPrice) {\n        \tlet dp = {};\n\t        dp[\"value\"] = orders[i].tokenPrice;\n\t        dp[type + \"volume\"] = orders[i].volume;\n\t        dp[type + \"totalvolume\"] = orders[i].totalvolume;\n\n        \tres.push(dp);\n    \t} else {\n    \t\tres[res.length - 1][type + \"volume\"] = orders[i].volume;\n    \t\tres[res.length - 1][type + \"totalvolume\"] = orders[i].totalvolume;\n    \t}\n\n        prevPrice = orders[i].tokenPrice\n     }\n\n     return res\n}\n\nexport const myFilledOrdersLoadedSelector = createSelector(filledOrdersLoaded, fol => fol)\n\nexport const myFilledOrdersSelector = createSelector(\n\taccount,\n\tfilledOrders,\n\ttoken,\n\t(account, orders, token) => {\n\t\torders = orders.filter((o) => o.user === account || o.userFill === account)\n\t\torders = decorateMyFilledOrders(orders, account, token)\n\t\treturn orders\n\t}\n)\n\nconst decorateMyFilledOrders = (orders, account, token) => {\n\treturn (\n\t\torders.map((order) => {\n\t\t\torder = decorateOrder(order, token)\n\t\t\torder = decorateMyFilledOrder(order, account)\n\t\t\treturn order\n\t\t})\n\t)\n}\n\nconst decorateMyFilledOrder = (order, account) => {\n\tconst myOrder = order.user === account\n\n\tlet orderType\n\tif (myOrder) {\n\t\torderType = order.tokenGive === ETHER_ADDRESS ? 'buy' : 'sell'\n\t} else {\n\t\torderType = order.tokenGive === ETHER_ADDRESS ? 'sell' : 'buy'\n\t}\n\n\treturn ({\n\t\t...order,\n\t\torderTypeClass: (orderType === 'buy' ? GREEN : RED),\n\t\torderSign: (orderType === 'buy' ? '+' : '-')\n\t})\n}\n\nexport const myOpenOrdersLoadedSelector = createSelector(orderBookLoaded, obl => obl)\n\nexport const myOpenOrdersSelector = createSelector(\n\taccount,\n\topenOrders,\n\ttoken,\n\t(account, orders, token) => {\n\t\torders = orders.filter((o) => o.user === account)\n\t\torders = decorateMyOpenOrders(orders, account, token)\n\t\torders = orders.sort((a, b) => b.timestamp - a.timestamp)\n\t\treturn orders\n\t}\n)\n\nconst decorateMyOpenOrders = (orders, account, token) => {\n\treturn (\n\t\torders.map((order) => {\n\t\t\torder = decorateOrder(order, token)\n\t\t\torder = decorateMyOpenOrder(order, account)\n\t\t\treturn order\n\t\t})\n\t)\n}\n\nconst decorateMyOpenOrder = (order, account) => {\n\tlet orderType = order.tokenGive === ETHER_ADDRESS ? 'buy' : 'sell'\n\n\treturn ({\n\t\t...order,\n\t\torderTypeClass: (orderType === 'buy' ? GREEN : RED)\n\t})\n}\n\nexport const priceChartLoadedSelector = createSelector(filledOrdersLoaded, loaded => loaded)\n\nexport const priceChartSelector = createSelector(\n\tfilledOrders,\n\ttoken,\n\t(orders, token) => {\n\t\torders = orders.sort((a, b) => a.timestamp - b.timestamp)\n\t\torders = orders.map((o) => decorateOrder(o, token))\n\n\t\t// get last two orders for final price\n\t\tlet secondLastOrder, lastOrder\n\t\t[secondLastOrder, lastOrder] = orders.slice(orders.length - 2, orders.length)\n\t\tconst lastPrice = get(lastOrder, 'tokenPrice', 0)\n\t\tconst secondLastPrice = get(secondLastOrder, 'tokenPrice', 0)\n\t\treturn ({\n\t\t\tlastPrice,\n\t\t\tlastPriceChange: (lastPrice >= secondLastPrice ? '+' : '-'),\n\t\t\tseries: [{\n\t\t\t\tdata: buildGraphData(orders)\n\t\t\t}]\n\t\t})\n\t}\n)\n\nexport const buildGraphData = (orders) => {\n\n\t// group by hour\n\torders = groupBy(orders, (o) => moment.unix(o.timestamp).startOf('hour').format())\n\n\t// get each hour with data\n\tconst hours = Object.keys(orders)\n\n\tconst graphData = hours.map((hour) => {\n\t\t// calculate open, high, low, close for the hour\n\t\tconst group = orders[hour]\n\t\tconst open = group[0]\n\t\tconst close = group[group.length - 1]\n\t\tconst low = minBy(group, 'tokenPrice')\n\t\tconst high = maxBy(group, 'tokenPrice')\n\n\t\treturn ({\n\t\t\tx: new Date(hour),\n\t\t\ty: [open.tokenPrice, high.tokenPrice, low.tokenPrice, close.tokenPrice]\n\t\t})\n\t})\n\n\treturn graphData\n}\n\nconst orderCancelling = state => get(state, 'exchange.orderCancelling', false)\nexport const orderCancellingSelector = createSelector(orderCancelling, c => c)\n\nconst orderFilling = state => get(state, 'exchange.orderFilling', false)\nexport const orderFillingSelector = createSelector(orderFilling, f => f)\n","import React, { Component } from 'react'\nimport { Form, FormControl, Button, Row, Col } from 'react-bootstrap'\nimport { connect } from 'react-redux'\nimport Spinner from './Spinner'\nimport { \n  addToken\n} from '../store/interactions'\nimport { \n  accountSelector, \n  exchangeSelector,\n  web3Selector,\n  tokenListSelector\n} from '../store/selectors'\n\nclass Settings extends Component {\n\tcomponentDidMount() {\n\t\tthis.loadBlockchainData(this.props)\n\t}\n\n\tasync loadBlockchainData(props) {\n\t}\n\n  render() {\n    const {\n      web3,\n      exchange,\n      account,\n      tokenList,\n      dispatch\n    } = this.props\n\n    return (\n      <div>\n        <div className=\"card bg-light text-dark\">\n          <div className=\"card-header\">\n            Add new ERC20 Token\n          </div>\n          <div className=\"card-body\">\n              <Form noValidate onSubmit={(event) => {\n                event.preventDefault()\n                let tokenAddressInput = document.getElementById('newTokenAddressInput')\n                addToken(tokenAddressInput.value, tokenList, web3, account, exchange, dispatch)\n              }}>\n              <Form.Row>\n                <Form.Group as={Col}>\n                  <Form.Control autoFocus name=\"tokenAddress\" placeholder=\"Token contract address\" id=\"newTokenAddressInput\" />\n                </Form.Group>\n\n                <Form.Group as={Col} controlId=\"formGridPassword\">\n                  <Button variant=\"primary\" type=\"submit\">\n                    Add Token\n                  </Button>\n                </Form.Group>\n              </Form.Row>\n            </Form>\n          </div>\n        </div>\n        \n        <div className=\"card bg-light text-dark\">\n          <div className=\"card-header\">\n            ERC20 Tokens\n          </div>\n          <div className=\"card-body\">\n              { showTokens(this.props) }\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction showTokens(props) {\n  const { tokenList } = props\n  return (\n    <table className=\"table table-bordered table-light table-sm small\" id=\"dataTable\" width=\"100%\">\n      <thead>\n        <tr>\n          <th>Symbol</th>\n          <th>Name</th>\n          <th>Decimals</th>\n        </tr>\n      </thead>\n      <tbody>\n      { tokenList.map((token) => {\n          return (\n              <tr key={token.tokenAddress}>\n                <td className=\"text-muted\">{token.symbol}</td>\n                <td>{token.name}</td>\n                <td>{token.decimals}</td>\n              </tr>\n          )\n        })\n      }\n      </tbody>\n    </table>\n  )\n}\n\nfunction mapStateToProps(state) {\n\n  return {\n    account: accountSelector(state),\n    web3: web3Selector(state),\n    exchange: exchangeSelector(state),\n    tokenList: tokenListSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(Settings)\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nclass Home extends Component {\n\n  render() {\n    return (\n      <div className=\"content\">\n        Welcome to the Kouga ERC20 exchange.\n        Please note, a 1% fee is charged on all succesful trades.\n      </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n  }\n}\n\nexport default connect(mapStateToProps)(Home)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport * as am4core from \"@amcharts/amcharts4/core\";\nimport * as am4charts from \"@amcharts/amcharts4/charts\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\n\nam4core.useTheme(am4themes_animated);\n\nclass DepthChart extends Component {\n  componentDidMount() {\n    let chart = am4core.create(\"chartdiv\", am4charts.XYChart);\n    chart.data = this.props.data\n    \n    // Set up precision for numbers\n    chart.numberFormatter.numberFormat = \"#,###.####\";\n\n    // Create axes\n    let xAxis = chart.xAxes.push(new am4charts.CategoryAxis());\n    xAxis.dataFields.category = \"value\";\n    xAxis.renderer.minGridDistance = 50;\n    xAxis.title.text = `Price (${this.props.priceTitle})`;\n    xAxis.renderer.labels.template.fill = am4core.color(\"#111\");\n    xAxis.title.fill = am4core.color(\"#111\");\n\n    let yAxis = chart.yAxes.push(new am4charts.ValueAxis());\n    yAxis.title.text = `${this.props.volumeTitle} Volume`;\n    yAxis.renderer.labels.template.fill = am4core.color(\"#111\");\n    yAxis.title.fill = am4core.color(\"#111\");\n\n    // Create bid value series\n    let bidValueSeries = chart.series.push(new am4charts.StepLineSeries());\n    bidValueSeries.dataFields.categoryX = \"value\";\n    bidValueSeries.dataFields.valueY = \"bidtotalvolume\";\n    bidValueSeries.strokeWidth = 2;\n    bidValueSeries.stroke = am4core.color(\"#0f0\");\n    bidValueSeries.fill = bidValueSeries.stroke;\n    bidValueSeries.fillOpacity = 0.1;\n    bidValueSeries.tooltipText = \"Bid: [bold]{categoryX}[/]\\nTotal volume: [bold]{valueY}[/]\\nVolume: [bold]{bidvolume}[/]\"\n\n    // Create ask value series\n    let askValueSeries = chart.series.push(new am4charts.StepLineSeries());\n    askValueSeries.dataFields.categoryX = \"value\";\n    askValueSeries.dataFields.valueY = \"asktotalvolume\";\n    askValueSeries.strokeWidth = 2;\n    askValueSeries.stroke = am4core.color(\"#f00\");\n    askValueSeries.fill = askValueSeries.stroke;\n    askValueSeries.fillOpacity = 0.1;\n    askValueSeries.tooltipText = \"Ask: [bold]{categoryX}[/]\\nTotal volume: [bold]{valueY}[/]\\nVolume: [bold]{askvolume}[/]\"\n\n    // Create bid volume series\n    let bidVolumeSeries = chart.series.push(new am4charts.ColumnSeries());\n    bidVolumeSeries.dataFields.categoryX = \"value\";\n    bidVolumeSeries.dataFields.valueY = \"bidvolume\";\n    bidVolumeSeries.strokeWidth = 0;\n    bidVolumeSeries.fill = am4core.color(\"#aaa\");\n    bidVolumeSeries.fillOpacity = 0.2;\n\n    // Create ask volume series\n    let askVolumeSeries = chart.series.push(new am4charts.ColumnSeries());\n    askVolumeSeries.dataFields.categoryX = \"value\";\n    askVolumeSeries.dataFields.valueY = \"askvolume\";\n    askVolumeSeries.strokeWidth = 0;\n    askVolumeSeries.fill = am4core.color(\"#aaa\");\n    askVolumeSeries.fillOpacity = 0.2;\n\n    // Add cursor\n    chart.cursor = new am4charts.XYCursor();\n\n    this.chart = chart;\n  }\n\n  componentWillUnmount() {\n    if (this.chart) {\n      this.chart.dispose();\n    }\n  }\n\n  componentDidUpdate(oldProps) {\n    if(JSON.stringify(oldProps.data) !== JSON.stringify(this.props.data)) {\n      this.chart.data = this.props.data;\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"chartdiv\" style={{ width: \"100%\", height: \"300px\" }}></div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n  }\n}\n\nexport default connect(mapStateToProps)(DepthChart)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Row, Col } from 'react-bootstrap'\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap'\nimport Spinner from '../Spinner'\nimport DepthChart from './DepthChart'\nimport { \n  orderBookSelector,\n  orderBookLoadedSelector,\n  exchangeSelector,\n  accountSelector,\n  tokenSelector,\n  tokenLoadingSelector,\n  orderFillingSelector,\n  depthChartSelector \n} from '../../store/selectors'\nimport { fillOrder } from '../../store/interactions'\n\nclass MarketOrderBook extends Component {\n\tcomponentDidMount() {\n\t\tthis.loadBlockchainData(this.props)\n\t}\n\n\tasync loadBlockchainData(props) {\n\t}\n\n  render() {\n    return (\n      <div>\n      { this.props.orderBookLoaded ? showOrderBook(this.props) : <Spinner type='div'/> }\n      </div>\n    )\n  }\n}\n\nfunction showOrderBook(props, buys) {\n  const { orderBook } = props\n  const orders = (buys ? orderBook.buyOrders : orderBook.sellOrders)\n\n  return (\n      <Container>\n        <Row>\n          <Col sm={12}>\n            <div className=\"card bg-light text-dark\">\n              <div className=\"card-body\">\n                { showDepthChart(props) }\n              </div>\n            </div>\n          </Col>\n        </Row>\n        <Row>\n          <Col sm={6}>\n            <div className=\"card bg-light text-dark\">\n              <div className=\"card-header\">\n                Buy Orders\n              </div>\n              <div className=\"card-body\">\n                { showOrders(props, true) }\n              </div>\n            </div>\n          </Col>\n          <Col sm={6}>\n            <div className=\"card bg-light text-dark\">\n              <div className=\"card-header\">\n                Sell Orders\n              </div>\n              <div className=\"card-body\">\n                { showOrders(props, false) }\n              </div>\n            </div>\n          </Col>\n        </Row>\n      </Container>\n  )\n}\n\nfunction showOrders(props, buys) {\n  const { orderBook, token } = props\n  const orders = (buys ? orderBook.buyOrders : orderBook.sellOrders)\n\n  return (\n    <table className=\"table table-bordered table-light table-sm small\" id=\"dataTable\" width=\"100%\">\n      <thead>\n        <tr>\n          <th>{token.symbol}</th>\n          <th>ETH/{token.symbol}</th>\n          <th>ETH</th>\n        </tr>\n      </thead>\n      <tbody>\n        { orders.map((order) => renderOrder(order, props)) }\n      </tbody>\n    </table>\n  )\n}\n\nfunction renderOrder(order, props) {\n  const { account, exchange, dispatch } = props\n\n  return (\n    <OverlayTrigger\n      key={order.id}\n      placement='auto'\n      overlay={\n        <Tooltip id={order.id}>\n          {`Click here to ${order.orderFillAction}`}\n        </Tooltip>\n      }\n    >\n      <tr key={order.id}\n          className=\"order-book-order\"\n          onClick={(e) => {\n            fillOrder(order, account, exchange, dispatch)\n          }}\n      >\n        <td>{order.tokenAmount}</td>\n        <td className={`text-${order.orderTypeClass}`}>{order.tokenPrice}</td>\n        <td>{order.etherAmount}</td>\n      </tr>\n    </OverlayTrigger>\n  )\n}\n\nfunction showDepthChart(props) {\n  const { token, depthChart } = props\n  return (\n    <DepthChart data={depthChart.orders} priceTitle={`ETH/${token.symbol}`} volumeTitle={token.symbol} />\n  )\n}\n\nfunction mapStateToProps(state) {\n  const orderBookLoaded = orderBookLoadedSelector(state)\n  const orderFilling = orderFillingSelector(state)\n  const tokenLoading = tokenLoadingSelector(state)\n\n  return {\n    orderBookLoaded: !tokenLoading && orderBookLoaded && !orderFilling,\n    orderBook: orderBookSelector(state),\n    exchange: exchangeSelector(state),\n    account: accountSelector(state),\n    token: tokenSelector(state),\n    depthChart: depthChartSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(MarketOrderBook)\n\n\n","export const chartOptions = {\n  chart: {\n    animations: { enabled: false },\n    toolbar: { show: false },\n    width: '100px'\n  },\n  tooltip: {\n    enabled: true,\n    theme: false,\n    style: {\n      fontSize: '12px',\n      fontFamily: undefined\n    },\n    x: {\n        show: false,\n        format: 'dd MMM',\n        formatter: undefined,\n    },\n    y: {\n      show: true,\n      title: 'price'\n    },\n    marker: {\n      show: false,\n    },\n    items: {\n       display: 'flex',\n    },\n    fixed: {\n        enabled: false,\n        position: 'topRight',\n        offsetX: 0,\n        offsetY: 0,\n    },\n  },\n  xaxis: {\n    type: 'datetime',\n    labels: {\n      show: true,\n      style: {\n          colors: '#fff',\n          fontSize: '8px',\n          cssClass: 'apexcharts-xaxis-label',\n      },\n    },\n  },\n  yaxis: {\n    labels: {\n      show: true,\n      minWidth: 0,\n      maxWidth: 160,\n      style: {\n        color: '#fff',\n        fontSize: '8px',\n        cssClass: 'apexcharts-yaxis-label',\n      },\n      offsetX: 0,\n      offsetY: 0,\n      rotate: 0,\n    }\n  }\n}\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Tabs, Tab } from 'react-bootstrap'\nimport Chart from 'react-apexcharts'\nimport Spinner from '../Spinner'\nimport { chartOptions } from './PriceChart.config'\nimport { \n  tokenSelector,\n  tokenLoadingSelector,\n  priceChartLoadedSelector,\n  priceChartSelector\n} from '../../store/selectors'\n\nclass PriceChart extends Component {\n\n  render() {\n    return (\n      <div className=\"card bg-light text-dark\">\n        <div className=\"card-body\">\n          { this.props.priceChartLoaded ? showPriceChart(this.props) : <Spinner type=\"div\" /> }\n        </div>\n      </div>\n    )\n  }\n}\n\nconst showPriceChart = (props) => {\n  const {token, priceChart} = props\n\n  return (\n    <div className=\"price-chart\">\n      <div className=\"price\">\n        <h4>ETH/{token.symbol} &nbsp; { priceSymbol(priceChart.lastPriceChange) } &nbsp; { priceChart.lastPrice }</h4>\n      </div>\n      <Chart options={chartOptions} series={priceChart.series} type='candlestick' width='100%' height='200px'/>\n    </div>\n  )\n}\n\nconst priceSymbol = (priceChange) => {\n  let output\n  if (priceChange === '+') {\n    output = <span className=\"text-success\">&#9650;</span>\n  } else {\n    output = <span className=\"text-danger\">&#9660;</span>\n  }\n  return output\n}\n\nfunction mapStateToProps(state) {\n  const tokenLoading = tokenLoadingSelector(state)\n  const priceChartLoaded = priceChartLoadedSelector(state)\n    \n  return {\n    token: tokenSelector(state),\n    priceChartLoaded: priceChartLoaded && !tokenLoading,\n    priceChart: priceChartSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(PriceChart)\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Container, Row, Col } from 'react-bootstrap'\nimport Spinner from '../Spinner'\nimport PriceChart from './PriceChart'\nimport {\n  contractsLoadedSelector,\n  tokenSelector,\n  tokenLoadingSelector,\n  filledOrdersLoadedSelector,\n  filledOrdersSelector \n} from '../../store/selectors'\n\nclass MarketTrades extends Component {\n\tcomponentDidMount() {\n\t\tthis.loadBlockchainData(this.props)\n\t}\n\n\tasync loadBlockchainData(props) {\n\t}\n\n  render() {\n    return (\n      <div>\n        { this.props.contractsLoaded ?\n          <Container>\n            <Row>\n              <Col sm={12}>\n                <PriceChart />\n              </Col>\n            </Row>\n            <Row>\n              <Col sm={12}>\n                <div className=\"card bg-light text-dark\">\n                  <div className=\"card-body\">\n                    <table className=\"table table-bordered table-light table-sm small\" id=\"dataTable\" width=\"100%\">\n                        <thead>\n                          <tr>\n                            <th>Time</th>\n                            <th>{this.props.token.symbol}</th>\n                            <th>ETH/{this.props.token.symbol}</th>\n                          </tr>\n                        </thead>\n                        { this.props.filledOrdersLoaded ? showFilledOrders(this.props.filledOrders) : <Spinner type=\"table\" /> }\n                      </table>\n                  </div>\n                </div>\n              </Col>\n            </Row>\n          </Container>\n          :\n          <Spinner type=\"div\" />\n        }\n      </div>\n    )\n  }\n}\n\nfunction showFilledOrders(orders) {\n  return (\n    <tbody>\n    { orders.map((order) => {\n        return (\n            <tr key={order.id} className={`order-${order.id}`}>\n              <td className=\"text-muted\">{order.formattedTimestamp}</td>\n              <td>{order.tokenAmount}</td>\n              <td className={`text-${order.tokenPriceClass}`}>{order.tokenPrice}</td>\n            </tr>\n        )\n      })\n    }\n    </tbody>\n  )\n}\n\nfunction mapStateToProps(state) {\n  const tokenLoading = tokenLoadingSelector(state)\n  const filledOrdersLoaded = filledOrdersLoadedSelector(state)\n\n  return {\n    contractsLoaded: contractsLoadedSelector(state),\n    token: tokenSelector(state),\n    filledOrdersLoaded: filledOrdersLoaded && !tokenLoading,\n    filledOrders: filledOrdersSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(MarketTrades)\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { OverlayTrigger, Tooltip, Container, Row, Col } from 'react-bootstrap'\nimport Spinner from '../Spinner'\nimport { \n  orderBookSelector,\n  orderBookLoadedSelector,\n  exchangeSelector,\n  accountSelector,\n  orderFillingSelector,\n  tokenSelector,\n  tokenLoadingSelector\n} from '../../store/selectors'\nimport { fillOrder } from '../../store/interactions'\n\nclass SellOrders extends Component {\n\tcomponentDidMount() {\n\t\tthis.loadBlockchainData(this.props)\n\t}\n\n\tasync loadBlockchainData(props) {\n\t}\n\n  render() {\n    return (\n      <div>\n      { this.props.orderBookLoaded ? showOrderTable(this.props, false) : <Spinner type='div'/> }\n      </div>\n    )\n  }\n}\n\nfunction showOrderTable(props, buys) {\n  const { orderBook } = props\n  const orders = (buys ? orderBook.buyOrders : orderBook.sellOrders)\n\n  return (\n      <div className=\"card bg-light text-dark\">\n        <div className=\"card-body\">\n          { showOrders(props, buys) }\n        </div>\n      </div>\n  )\n}\n\nfunction showOrders(props, buys) {\n  const { orderBook, token } = props\n  const orders = (buys ? orderBook.buyOrders : orderBook.sellOrders)\n\n  return (\n    <table className=\"table table-bordered table-light table-sm small\" id=\"dataTable\" width=\"100%\">\n      <thead>\n        <tr>\n          <th>{token.symbol}</th>\n          <th>ETH/{token.symbol}</th>\n          <th>ETH</th>\n        </tr>\n      </thead>\n      <tbody>\n        { orders.map((order) => renderOrder(order, props)) }\n      </tbody>\n    </table>\n  )\n}\n\nfunction renderOrder(order, props) {\n  const { account, exchange, dispatch } = props\n\n  return (\n    <OverlayTrigger\n      key={order.id}\n      placement='auto'\n      overlay={\n        <Tooltip id={order.id}>\n          {`Click here to ${order.orderFillAction}`}\n        </Tooltip>\n      }\n    >\n      <tr key={order.id}\n          className=\"order-book-order\"\n          onClick={(e) => {\n            fillOrder(order, account, exchange, dispatch)\n          }}\n      >\n        <td>{order.tokenAmount}</td>\n        <td className={`text-${order.orderTypeClass}`}>{order.tokenPrice}</td>\n        <td>{order.etherAmount}</td>\n      </tr>\n    </OverlayTrigger>\n  )\n}\n\nfunction mapStateToProps(state) {\n  const orderBookLoaded = orderBookLoadedSelector(state)\n  const orderFilling = orderFillingSelector(state)\n  const tokenLoading = tokenLoadingSelector(state)\n\n  return {\n    orderBookLoaded: !tokenLoading && orderBookLoaded && !orderFilling,\n    orderBook: orderBookSelector(state),\n    exchange: exchangeSelector(state),\n    account: accountSelector(state),\n    token: tokenSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(SellOrders)\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport Spinner from '../Spinner'\nimport { \n  makeBuyOrder\n} from '../../store/interactions'\nimport {\n  accountSelector, \n  exchangeSelector, \n  tokenSelector, \n  web3Selector,\n  buyOrderSelector\n} from '../../store/selectors'\nimport { \n  buyOrderAmountChanged,\n  buyOrderPriceChanged\n} from '../../store/actions'\n\nclass NewBuyOrder extends Component {\n\t\n  render() {\n    return (\n      <div className=\"card bg-light text-dark\">\n        <div className=\"card-header\">\n          NewOrder\n        </div>\n        <div className=\"card-body\">\n          { this.props.showForm ? showForm(this.props) : <Spinner type='div' /> }\n        </div>\n      </div>\n    )\n  }\n}\n\nconst showForm = (props) => {\n  const {\n    web3,\n    exchange,\n    token,\n    account,\n    buyOrder,\n    showBuyTotal,\n    dispatch\n  } = props\n  return (\n    <form onSubmit={(event) => {\n      event.preventDefault()\n      makeBuyOrder(buyOrder, account, web3, token, exchange, dispatch)\n    }}>\n      <div className=\"form-group small\">\n        <label>Buy Amount ({token.symbol})</label>\n        <div className=\"input-group\">\n          <input\n            type=\"text\"\n            placeholder=\"Buy Amount\"\n            onChange={(e) => {dispatch(buyOrderAmountChanged(e.target.value))}}\n            className=\"form-control form-control-sm bg-light text-dark\"\n            required\n          />\n        </div>\n      </div>\n      <div className=\"form-group small\">\n        <label>Buy Price</label>\n        <div className=\"input-group\">\n          <input\n            type=\"text\"\n            placeholder=\"Buy Price\"\n            onChange={(e) => {dispatch(buyOrderPriceChanged(e.target.value))}}\n            className=\"form-control form-control-sm bg-light text-dark\"\n            required\n          />\n        </div>\n      </div>\n      <button type=\"Submit\" className=\"btn btn-primary btn-block btn-sm\">Buy Order</button>\n      { showBuyTotal ? <small>Total: {buyOrder.amount * buyOrder.price} ETH</small> : null }\n    </form>\n  )\n}\n\nfunction mapStateToProps(state) {\n  const buyOrder = buyOrderSelector(state)\n\n  return {\n    account: accountSelector(state),\n    exchange: exchangeSelector(state),\n    token: tokenSelector(state),\n    web3: web3Selector(state),\n    buyOrder,\n    showForm: !buyOrder.making,\n    showBuyTotal: buyOrder.amount && buyOrder.price\n  }\n}\n\nexport default connect(mapStateToProps)(NewBuyOrder)\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap'\nimport Spinner from '../Spinner'\nimport { \n  orderBookSelector,\n  orderBookLoadedSelector,\n  exchangeSelector,\n  accountSelector,\n  tokenSelector,\n  tokenLoadingSelector,\n  orderFillingSelector,\n} from '../../store/selectors'\nimport { fillOrder } from '../../store/interactions'\n\nclass BuyOrders extends Component {\n\tcomponentDidMount() {\n\t\tthis.loadBlockchainData(this.props)\n\t}\n\n\tasync loadBlockchainData(props) {\n\t}\n\n  render() {\n    return (\n      <div>\n      { this.props.orderBookLoaded ? showOrderTable(this.props, true) : <Spinner type='div'/> }\n      </div>\n    )\n  }\n}\n\nfunction showOrderTable(props, buys) {\n  const { orderBook } = props\n  const orders = (buys ? orderBook.buyOrders : orderBook.sellOrders)\n\n  return (\n      <div className=\"card bg-light text-dark\">\n        <div className=\"card-body\">\n          { showOrders(props, buys) }\n        </div>\n      </div>\n  )\n}\n\nfunction showOrders(props, buys) {\n  const { orderBook, token } = props\n  const orders = (buys ? orderBook.buyOrders : orderBook.sellOrders)\n\n  return (\n    <table className=\"table table-bordered table-light table-sm small\" id=\"dataTable\" width=\"100%\">\n      <thead>\n        <tr>\n          <th>{token.symbol}</th>\n          <th>ETH/{token.symbol}</th>\n          <th>ETH</th>\n        </tr>\n      </thead>\n      <tbody>\n        { orders.map((order) => renderOrder(order, props)) }\n      </tbody>\n    </table>\n  )\n}\n\nfunction renderOrder(order, props) {\n  const { account, exchange, dispatch } = props\n\n  return (\n    <OverlayTrigger\n      key={order.id}\n      placement='auto'\n      overlay={\n        <Tooltip id={order.id}>\n          {`Click here to ${order.orderFillAction}`}\n        </Tooltip>\n      }\n    >\n      <tr key={order.id}\n          className=\"order-book-order\"\n          onClick={(e) => {\n            fillOrder(order, account, exchange, dispatch)\n          }}\n      >\n        <td>{order.tokenAmount}</td>\n        <td className={`text-${order.orderTypeClass}`}>{order.tokenPrice}</td>\n        <td>{order.etherAmount}</td>\n      </tr>\n    </OverlayTrigger>\n  )\n}\n\nfunction mapStateToProps(state) {\n  const orderBookLoaded = orderBookLoadedSelector(state)\n  const orderFilling = orderFillingSelector(state)\n  const tokenLoading = tokenLoadingSelector(state)\n\n  return {\n    orderBookLoaded: !tokenLoading && orderBookLoaded && !orderFilling,\n    orderBook: orderBookSelector(state),\n    exchange: exchangeSelector(state),\n    account: accountSelector(state),\n    token: tokenSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(BuyOrders)\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport Spinner from '../Spinner'\nimport {\n  makeSellOrder \n} from '../../store/interactions'\nimport {\n  accountSelector, \n  exchangeSelector, \n  tokenSelector, \n  web3Selector,\n  sellOrderSelector\n} from '../../store/selectors'\nimport {\n  sellOrderAmountChanged,\n  sellOrderPriceChanged\n} from '../../store/actions'\n\nclass NewSellOrder extends Component {\n\t\n  render() {\n    return (\n      <div className=\"card bg-light text-dark\">\n        <div className=\"card-header\">\n          NewOrder\n        </div>\n        <div className=\"card-body\">\n          { this.props.showForm ? showForm(this.props) : <Spinner type='div' /> }\n        </div>\n      </div>\n    )\n  }\n}\n\nconst showForm = (props) => {\n  const {\n    web3,\n    exchange,\n    token,\n    account,\n    sellOrder,\n    showSellTotal,\n    dispatch\n  } = props\n  return (\n    \n    <form onSubmit={(event) => {\n      event.preventDefault()\n      makeSellOrder(sellOrder, account, web3, token, exchange, dispatch)\n    }}>\n      <div className=\"form-group small\">\n        <label>Sell Amount ({token.symbol})</label>\n        <div className=\"input-group\">\n          <input\n            type=\"text\"\n            placeholder=\"Sell Amount\"\n            onChange={(e) => {dispatch(sellOrderAmountChanged(e.target.value))}}\n            className=\"form-control form-control-sm bg-light text-dark\"\n            required\n          />\n        </div>\n      </div>\n      <div className=\"form-group small\">\n        <label>Sell Price</label>\n        <div className=\"input-group\">\n          <input\n            type=\"text\"\n            placeholder=\"Sell Price\"\n            onChange={(e) => {dispatch(sellOrderPriceChanged(e.target.value))}}\n            className=\"form-control form-control-sm bg-light text-dark\"\n            required\n          />\n        </div>\n      </div>\n      <button type=\"Submit\" className=\"btn btn-primary btn-block btn-sm\">Sell Order</button>\n      { showSellTotal ? <small>Total: {sellOrder.amount * sellOrder.price} ETH</small> : null }\n    </form>\n  )\n}\n\nfunction mapStateToProps(state) {\n  const sellOrder = sellOrderSelector(state)\n\n  return {\n    account: accountSelector(state),\n    exchange: exchangeSelector(state),\n    token: tokenSelector(state),\n    web3: web3Selector(state),\n    sellOrder,\n    showForm: !sellOrder.making,\n    showSellTotal: sellOrder.amount && sellOrder.price\n  }\n}\n\nexport default connect(mapStateToProps)(NewSellOrder)\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport Spinner from '../Spinner'\nimport { Tabs, Tab } from 'react-bootstrap'\nimport { \n  myOpenOrdersSelector,\n  myOpenOrdersLoadedSelector,\n  exchangeSelector,\n  accountSelector,\n  tokenSelector,\n  tokenLoadingSelector,\n  orderCancellingSelector\n} from '../../store/selectors'\nimport { cancelOrder } from '../../store/interactions'\n\nclass PortfolioOrders extends Component {\n\n  render() {\n    return (\n      <div className=\"card bg-light text-dark\">\n        <div className=\"card-body\">\n          \n            { this.props.myOpenOrdersLoaded ? showMyOpenOrders(this.props) : <Spinner type=\"div\" /> }\n          \n        </div>\n      </div>\n    )\n  }\n}\n\nfunction showMyOpenOrders(props) {\n  const { myOpenOrders, dispatch, exchange, account, token } = props\n  return (\n    <table className=\"table table-bordered table-light table-sm small\" id=\"dataTable\" width=\"100%\" cellspacing=\"0\">\n      <thead>\n        <tr>\n          <th>Amount</th>\n          <th>ETH/{token.symbol}</th>\n          <th>Cancel</th>\n        </tr>\n      </thead>\n      <tbody>\n      { myOpenOrders.map((order) => {\n          return (\n              <tr key={order.id}>\n                <td className={`text-${order.orderTypeClass}`}>{order.tokenAmount}</td>\n                <td className={`text-${order.orderTypeClass}`}>{order.tokenPrice}</td>\n                <td \n                className=\"text-muted cancel-order\"\n                onClick={(e) => {\n                  cancelOrder(order, account, exchange, dispatch)\n                }}>x</td>\n              </tr>\n          )\n        })\n      }\n      </tbody>\n    </table>\n  )\n}\n\nfunction mapStateToProps(state) {\n  const myOpenOrdersLoaded = myOpenOrdersLoadedSelector(state)\n  const orderCancelling = orderCancellingSelector(state)\n  const tokenLoading = tokenLoadingSelector(state)\n\n  return {\n    myOpenOrdersLoaded: !tokenLoading && myOpenOrdersLoaded && !orderCancelling,\n    myOpenOrders: myOpenOrdersSelector(state),\n    exchange: exchangeSelector(state),\n    account: accountSelector(state),\n    token: tokenSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(PortfolioOrders)\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport Spinner from '../Spinner'\nimport { Tabs, Tab } from 'react-bootstrap'\nimport { \n  myFilledOrdersSelector,\n  myFilledOrdersLoadedSelector,\n  exchangeSelector,\n  accountSelector,\n  tokenSelector,\n  tokenLoadingSelector,\n  orderCancellingSelector\n} from '../../store/selectors'\nimport { cancelOrder } from '../../store/interactions'\n\nclass PortfolioTrades extends Component {\n\n  render() {\n    return (\n      <div className=\"card bg-light text-dark\">\n        <div className=\"card-body\">\n            { this.props.myFilledOrdersLoaded ? showMyFilledOrders(this.props) : <Spinner type=\"div\" /> }\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction showMyFilledOrders(props) {\n  const { myFilledOrders, token } = props\n  return (\n    <table className=\"table table-bordered table-light table-sm small\" id=\"dataTable\" width=\"100%\">\n      <thead>\n        <tr>\n          <th>Time</th>\n          <th>{token.symbol}</th>\n          <th>ETH/{token.symbol}</th>\n        </tr>\n      </thead>\n      <tbody>\n      { myFilledOrders.map((order) => {\n          return (\n              <tr key={order.id}>\n                <td className=\"text-muted\">{order.formattedTimestamp}</td>\n                <td className={`text-${order.orderTypeClass}`}>{order.orderSign}{order.tokenAmount}</td>\n                <td className={`text-${order.orderTypeClass}`}>{order.tokenPrice}</td>\n              </tr>\n          )\n        })\n      }\n      </tbody>\n    </table>\n  )\n}\n\nfunction mapStateToProps(state) {\n  const orderCancelling = orderCancellingSelector(state)\n  const tokenLoading = tokenLoadingSelector(state)\n\n  return {\n    myFilledOrdersLoaded: !tokenLoading && myFilledOrdersLoadedSelector(state),\n    myFilledOrders: myFilledOrdersSelector(state),\n    exchange: exchangeSelector(state),\n    account: accountSelector(state),\n    token: tokenSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(PortfolioTrades)\n\n\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport Spinner from '../Spinner'\nimport { Tabs, Tab } from 'react-bootstrap'\nimport { \n  loadBalances,\n  depositEther,\n  withdrawEther,\n  depositToken,\n  withdrawToken \n} from '../../store/interactions'\nimport {\n  accountSelector, \n  exchangeSelector, \n  tokenSelector, \n  tokenLoadingSelector, \n  web3Selector,\n  balancesLoadingSelector,\n  etherBalanceSelector,\n  tokenBalanceSelector,\n  exchangeEtherBalanceSelector,\n  exchangeTokenBalanceSelector,\n  etherDepositAmountSelector,\n  etherWithdrawAmountSelector,\n  tokenDepositAmountSelector,\n  tokenWithdrawAmountSelector\n} from '../../store/selectors'\nimport { \n  etherDepositAmountChanged,\n  etherWithdrawAmountChanged,\n  tokenDepositAmountChanged,\n  tokenWithdrawAmountChanged\n} from '../../store/actions'\n\nclass FundsBalance extends Component {\n\tcomponentWillMount() {\n    this.loadBlockchainData(this.props)\n  }\n\n  async loadBlockchainData(props) {\n  }\n\n  render() {\n    return (\n      <div className=\"card bg-light text-dark\">\n        <div className=\"card-header\">\n          Balance\n        </div>\n        <div className=\"card-body\">\n          {this.props.showForm ? showForm(this.props) : <Spinner type=\"div\" />}\n        </div>\n      </div>\n    )\n  }\n}\n\nfunction showForm(props) {\n  const {\n    web3,\n    exchange,\n    token,\n    account,\n    etherBalance,\n    tokenBalance,\n    exchangeEtherBalance,\n    exchangeTokenBalance,\n    dispatch,\n    etherDepositAmount,\n    etherWithdrawAmount,\n    tokenDepositAmount,\n    tokenWithdrawAmount\n  } = props\n  return(\n    <Tabs defaultActiveKey=\"deposit\" className=\"bg-light text-dark\">\n      <Tab eventKey=\"deposit\" title=\"Deposit\" className=\"bg-light\">\n        <table className=\"table table-bordered table-light table-sm small\" id=\"dataTable\" width=\"100%\">\n          <thead>\n            <tr>\n              <th>Token</th>\n              <th>Wallet</th>\n              <th>Exchange</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>ETH</td>\n              <td>{etherBalance}</td>\n              <td>{exchangeEtherBalance}</td>\n            </tr>\n          </tbody>\n        </table>\n\n        <form className=\"row\" onSubmit={(event) => {\n          event.preventDefault()\n          depositEther(etherDepositAmount, account, web3, exchange, dispatch)\n        }}>\n          <div className=\"col-12 col-sm pr-sm-2\">\n            <input\n              type=\"text\"\n              placeholder=\"ETH Amount\"\n              onChange={(e) => {dispatch(etherDepositAmountChanged(e.target.value))}}\n              className=\"form-control form-control-sm bg-light text-dark\"\n              required\n            />\n          </div>\n          <div className=\"col-12 col-sm-auto pl-sm-0\">\n            <button type=\"Submit\" className=\"btn btn-primary btn-block btn-sm\">Deposit</button>\n          </div>\n        </form>\n\n        <table className=\"table table-light table-sm small\">\n          \n          <tbody>\n            <tr>\n              <td>{token.symbol}</td>\n              <td>{tokenBalance}</td>\n              <td>{exchangeTokenBalance}</td>\n            </tr>\n          </tbody>\n        </table>\n\n        <form className=\"row\" onSubmit={(event) => {\n          event.preventDefault()\n          depositToken(tokenDepositAmount, account, web3, token, exchange, dispatch)\n        }}>\n          <div className=\"col-12 col-sm pr-sm-2\">\n            <input\n              type=\"text\"\n              placeholder={`${token.symbol} Amount`}\n              onChange={(e) => {dispatch(tokenDepositAmountChanged(e.target.value))}}\n              className=\"form-control form-control-sm bg-light text-dark\"\n              required\n            />\n          </div>\n          <div className=\"col-12 col-sm-auto pl-sm-0\">\n            <button type=\"Submit\" className=\"btn btn-primary btn-block btn-sm\">Deposit</button>\n          </div>\n        </form>\n        \n\n      </Tab>\n      <Tab eventKey=\"withdraw\" title=\"Withdraw\" className=\"bg-light\">\n        <table className=\"table table-light table-sm small\">\n          <thead>\n            <tr>\n              <th>Token</th>\n              <th>Wallet</th>\n              <th>Exchange</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>ETH</td>\n              <td>{etherBalance}</td>\n              <td>{exchangeEtherBalance}</td>\n            </tr>\n          </tbody>\n        </table>\n\n        <form className=\"row\" onSubmit={(event) => {\n          event.preventDefault()\n          withdrawEther(etherWithdrawAmount, account, web3, exchange, dispatch)\n        }}>\n          <div className=\"col-12 col-sm pr-sm-2\">\n            <input\n              type=\"text\"\n              placeholder=\"ETH Amount\"\n              onChange={(e) => {\n                console.log('etherWithdrawAmountChanged', e.target.value)\n                dispatch(etherWithdrawAmountChanged(e.target.value))}}\n              className=\"form-control form-control-sm bg-light text-dark\"\n              required\n            />\n          </div>\n          <div className=\"col-12 col-sm-auto pl-sm-0\">\n            <button type=\"Submit\" className=\"btn btn-primary btn-block btn-sm\">Withdraw</button>\n          </div>\n        </form>\n\n        <table className=\"table table-light table-sm small\">\n          <tbody>\n            <tr>\n              <td>{token.symbol}</td>\n              <td>{tokenBalance}</td>\n              <td>{exchangeTokenBalance}</td>\n            </tr>\n          </tbody>\n        </table>\n\n        <form className=\"row\" onSubmit={(event) => {\n          event.preventDefault()\n          withdrawToken(tokenWithdrawAmount, account, web3, token, exchange, dispatch)\n        }}>\n          <div className=\"col-12 col-sm pr-sm-2\">\n            <input\n              type=\"text\"\n              placeholder={`${token.symbol} Amount`}\n              onChange={(e) => {\n                console.log('etherWithdrawAmountChanged', e.target.value)\n                dispatch(tokenWithdrawAmountChanged(e.target.value))}}\n              className=\"form-control form-control-sm bg-light text-dark\"\n              required\n            />\n          </div>\n          <div className=\"col-12 col-sm-auto pl-sm-0\">\n            <button type=\"Submit\" className=\"btn btn-primary btn-block btn-sm\">Withdraw</button>\n          </div>\n        </form>\n\n      </Tab>\n    </Tabs>\n  )\n}\n\nfunction mapStateToProps(state) {\n  const balancesLoading = balancesLoadingSelector(state)\n  const tokenLoading = tokenLoadingSelector(state)\n\n  return {\n    account: accountSelector(state),\n    exchange: exchangeSelector(state),\n    token: tokenSelector(state),\n    web3: web3Selector(state),\n    etherBalance: etherBalanceSelector(state),\n    tokenBalance: tokenBalanceSelector(state),\n    exchangeEtherBalance: exchangeEtherBalanceSelector(state),\n    exchangeTokenBalance: exchangeTokenBalanceSelector(state),\n    balancesLoading,\n    showForm: !tokenLoading && !balancesLoading,\n    etherDepositAmount: etherDepositAmountSelector(state),\n    etherWithdrawAmount: etherWithdrawAmountSelector(state),\n    tokenDepositAmount: tokenDepositAmountSelector(state),\n    tokenWithdrawAmount: tokenWithdrawAmountSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(FundsBalance)\n\n\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Settings from \"./Settings\";\nimport Home from \"./Home\";\nimport MarketOrderBook from \"./market/MarketOrderBook\";\nimport MarketTrades from './market/MarketTrades'\nimport SellOrders from './buy/SellOrders'\nimport NewBuyOrder from './buy/NewBuyOrder'\nimport BuyOrders from './sell/BuyOrders'\nimport NewSellOrder from './sell/NewSellOrder'\nimport PortfolioOrders from './portfolio/PortfolioOrders'\nimport PortfolioTrades from './portfolio/PortfolioTrades'\nimport FundsBalance from './funds/FundsBalance'\n\nexport default function Routes() {\n  return (\n  \t<Switch>\n      <Route path='/' exact component={Home} />\n      <Route path='/settings' component={Settings} />\n      <Route path='/market-orderbook' component={MarketOrderBook} />\n      <Route path='/market-trades' component={MarketTrades} />\n      <Route path='/buy-orders' component={SellOrders} />\n      <Route path='/buy-neworder' component={NewBuyOrder} />\n      <Route path='/sell-orders' component={BuyOrders} />\n      <Route path='/sell-neworder' component={NewSellOrder}/>\n      <Route path='/portfolio-orders' component={PortfolioOrders} />\n      <Route path='/portfolio-trades' component={PortfolioTrades} />\n      <Route path='/funds-balance' component={FundsBalance} />\n    </Switch>\n  );\n}","import React, { Component } from 'react'\nimport { Navbar, Nav, Dropdown, Form, FormControl, Button, Container, Row, Col } from 'react-bootstrap'\nimport { Link } from \"react-router-dom\";\nimport { connect } from 'react-redux'\nimport Routes from \"./Routes\"\nimport Identicon from 'identicon.js';\nimport { \n  addToken,\n  selectToken\n} from '../store/interactions'\nimport {\n  accountSelector, \n  exchangeSelector,\n  web3Selector,\n  tokenListSelector,\n  tokenSelector\n} from '../store/selectors'\nimport {\n  sideNavShowHideToggled\n} from '../store/actions'\n\nclass TopNav extends Component {\n\n  constructor(props) {    \n    super(props)\n    this.toggleSidenav = this.toggleSidenav.bind(this)\n  }\n\n  toggleSidenav() {\n    const {\n      dispatch\n    } = this.props\n    dispatch(sideNavShowHideToggled())\n  }\n\n  render() {\n    const {\n      web3,\n      exchange,\n      account,\n      tokenList,\n      token,\n      dispatch\n    } = this.props\n\n    const CustomToggle = React.forwardRef(({ children, onClick }, ref) => (\n      <a\n        href=\"/#\"\n        ref={ref}\n        onClick={e => {\n          e.preventDefault();\n          onClick(e);\n        }}\n      >\n        {children}\n        &#x25bc;\n      </a>\n    ));\n\n    const CustomMenu = React.forwardRef(\n      ({ children, style, className, 'aria-labelledby': labeledBy }, ref) => {\n        const [value, setValue] = React.useState('');\n        \n        return (\n          <div\n            ref={ref}\n            style={style}\n            className={className}\n            aria-labelledby={labeledBy}\n          >\n            <FormControl\n              autoFocus\n              className=\"mx-3 my-2 w-auto\"\n              placeholder=\"Type to filter...\"\n              onChange={e => setValue(e.target.value)}\n              value={value}\n            />\n            <ul className=\"list-unstyled\">\n              {React.Children.toArray(children).filter(\n                child =>\n                  !value || child.props.children.toLowerCase().startsWith(value),\n              )}\n            </ul>\n          </div>\n        );\n      },\n    );\n\n    return (\n      <div>\n        <nav className=\"sb-topnav navbar navbar-expand navbar-light bg-light\">\n            <Link className=\"navbar-brand\" to='/'>Kouga</Link>\n            <button className=\"btn btn-link btn-sm order-1 order-lg-0\" id=\"sidebarToggle\" href=\"#\" \n              onClick={\n                this.toggleSidenav\n              }>\n              <i className=\"fas fa-bars\"></i>\n            </button>\n\n            <Dropdown className=\"d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0\">\n              <Dropdown.Toggle as={CustomToggle} id=\"dropdown-custom-components\">\n                {token ? token.symbol : \"select token\"}\n              </Dropdown.Toggle>\n              <Dropdown.Menu as={CustomMenu}>\n                { tokenList.map((token) => renderTokenSelect(token, this.props)) }\n              </Dropdown.Menu>\n            </Dropdown>\n\n            <ul className=\"navbar-nav ml-auto ml-md-0\">\n                <li className=\"nav-item dropdown\">\n                    { this.props.account\n                      ? <a className=\"nav-link dropdown-toggle\" id=\"userDropdown\" href=\"#\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\n                          <img\n                            className=\"ml-2\"\n                            width='30'\n                            height='30'\n                            src={`data:image/png;base64,${new Identicon(this.props.account, 30).toString()}`}\n                            alt=\"\"\n                          />\n                        </a>\n                        \n                      : <span></span>\n                    }\n                    \n                    <div className=\"dropdown-menu dropdown-menu-right\" aria-labelledby=\"userDropdown\">\n                        <div className=\"dropdown-item\">{this.props.account}</div>\n                        <div className=\"dropdown-divider\"></div>\n                        <Link className=\"dropdown-item\" to='/settings'>Settings</Link>\n                    </div>\n                </li>\n            </ul>\n        </nav>\n      </div>\n      \n    )\n  }\n}\n\nfunction renderTokenSelect(token, props) {\n  const {\n    tokenList,\n    web3,\n    exchange,\n    account, \n    dispatch\n  } = props\n\n  return (\n    <Dropdown.Item \n      key={token.tokenAddress} \n      eventKey={token.tokenAddress} \n      onSelect={eKey => selectToken(eKey, tokenList, account, exchange, web3, dispatch)}>{token.symbol}</Dropdown.Item>\n  )\n}\n\nfunction mapStateToProps(state) {\n  return {\n    account: accountSelector(state),\n    web3: web3Selector(state),\n    exchange: exchangeSelector(state),\n    tokenList: tokenListSelector(state),\n    token: tokenSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(TopNav)\n","import React, { Component } from 'react'\nimport { Navbar, Nav, Dropdown, Form, FormControl, Button, Container, Row, Col } from 'react-bootstrap'\nimport { Link } from \"react-router-dom\";\nimport { connect } from 'react-redux'\nimport {\n  accountSelector, \n  exchangeSelector,\n  web3Selector,\n  tokenListSelector,\n  tokenSelector\n} from '../store/selectors'\n\nclass Navigation extends Component {\n\n  render() {\n    const {\n      web3,\n      exchange,\n      account,\n      tokenList,\n      token,\n      dispatch\n    } = this.props\n\n    return (\n          <div id=\"layoutSidenav_nav\">\n            <nav className=\"sb-sidenav accordion sb-sidenav-light\" id=\"sidenavAccordion\">\n                <div className=\"sb-sidenav-menu\">\n                    <div className=\"nav\">\n                        <div className=\"sb-sidenav-menu-heading\">Exchange</div>\n\n                        <a className=\"nav-link collapsed\" href=\"#\" data-toggle=\"collapse\" data-target=\"#collapseMarket\" aria-expanded=\"false\" aria-controls=\"collapseMarket\">\n                          <div className=\"sb-nav-link-icon\">\n                            <i className=\"fas fa-chart-line\"></i>\n                          </div>\n                          Market\n                          <div className=\"sb-sidenav-collapse-arrow\">\n                            <i className=\"fas fa-angle-down\"></i>\n                          </div>\n                        </a>\n                        <div className=\"collapse\" id=\"collapseMarket\" aria-labelledby=\"headingOne\" data-parent=\"#sidenavAccordion\">\n                          <nav className=\"sb-sidenav-menu-nested nav\">\n                            <Link className=\"nav-link\" to='/market-orderbook'>Orderbook</Link>\n                            <Link className=\"nav-link\" to='/market-trades'>Trades</Link>\n                          </nav>\n                        </div>\n\n                        <a className=\"nav-link collapsed\" href=\"#\" data-toggle=\"collapse\" data-target=\"#collapseBuy\" aria-expanded=\"false\" aria-controls=\"collapseBuy\">\n                          <div className=\"sb-nav-link-icon\">\n                            <i className=\"fas fa-arrow-alt-circle-down\"></i>\n                          </div>\n                          Buy\n                          <div className=\"sb-sidenav-collapse-arrow\">\n                            <i className=\"fas fa-angle-down\"></i>\n                          </div>\n                        </a>\n                        <div className=\"collapse\" id=\"collapseBuy\" aria-labelledby=\"headingOne\" data-parent=\"#sidenavAccordion\">\n                          <nav className=\"sb-sidenav-menu-nested nav\">\n                            <Link className=\"nav-link\" to='/buy-orders'>Sell Orders</Link>\n                            <Link className=\"nav-link\" to='/buy-neworder'>New Buy Order</Link>\n                          </nav>\n                        </div>\n\n                        <a className=\"nav-link collapsed\" href=\"#\" data-toggle=\"collapse\" data-target=\"#collapseSell\" aria-expanded=\"false\" aria-controls=\"collapseSell\">\n                          <div className=\"sb-nav-link-icon\">\n                            <i className=\"fas fa-arrow-alt-circle-up\"></i>\n                          </div>\n                          Sell\n                          <div className=\"sb-sidenav-collapse-arrow\">\n                            <i className=\"fas fa-angle-down\"></i>\n                          </div>\n                        </a>\n                        <div className=\"collapse\" id=\"collapseSell\" aria-labelledby=\"headingOne\" data-parent=\"#sidenavAccordion\">\n                          <nav className=\"sb-sidenav-menu-nested nav\">\n                            <Link className=\"nav-link\" to='/sell-orders'>Buy Orders</Link>\n                            <Link className=\"nav-link\" to='/sell-neworder'>New Sell Order</Link>\n                          </nav>\n                        </div>\n\n                        <a className=\"nav-link collapsed\" href=\"#\" data-toggle=\"collapse\" data-target=\"#collapsePortfolio\" aria-expanded=\"false\" aria-controls=\"collapsePortfolio\">\n                          <div className=\"sb-nav-link-icon\">\n                            <i className=\"fas fa-list\"></i>\n                          </div>\n                          Portfolio\n                          <div className=\"sb-sidenav-collapse-arrow\">\n                            <i className=\"fas fa-angle-down\"></i>\n                          </div>\n                        </a>\n                        <div className=\"collapse\" id=\"collapsePortfolio\" aria-labelledby=\"headingOne\" data-parent=\"#sidenavAccordion\">\n                          <nav className=\"sb-sidenav-menu-nested nav\">\n                            <Link className=\"nav-link\" to='/portfolio-orders'>My Orders</Link>\n                            <Link className=\"nav-link\" to='/portfolio-trades'>My Trades</Link>\n                          </nav>\n                        </div>\n\n                        <a className=\"nav-link collapsed\" href=\"#\" data-toggle=\"collapse\" data-target=\"#collapseFunds\" aria-expanded=\"false\" aria-controls=\"collapseFunds\">\n                          <div className=\"sb-nav-link-icon\">\n                            <i className=\"fas fa-money-bill\"></i>\n                          </div>\n                          Funds\n                          <div className=\"sb-sidenav-collapse-arrow\">\n                            <i className=\"fas fa-angle-down\"></i>\n                          </div>\n                        </a>\n                        <div className=\"collapse\" id=\"collapseFunds\" aria-labelledby=\"headingOne\" data-parent=\"#sidenavAccordion\">\n                          <nav className=\"sb-sidenav-menu-nested nav\">\n                            <Link className=\"nav-link\" to='/funds-balance'>Balance</Link>\n                          </nav>\n                        </div>\n\n                    </div>\n                </div>\n            </nav>\n          </div>\n    )\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    account: accountSelector(state),\n    web3: web3Selector(state),\n    exchange: exchangeSelector(state),\n    tokenList: tokenListSelector(state),\n    token: tokenSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(Navigation)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport TopNav from './TopNav'\nimport SideNav from './SideNav'\nimport Routes from \"./Routes\"\nimport { \n  loadWeb3, \n  loadAccount,\n  loadExchange,\n  selectToken\n} from '../store/interactions'\nimport { \n  accountSelector, \n  exchangeSelector,\n  web3Selector,\n  contractsLoadedSelector, \n  sideNavShowSelector, \n  tokenSelector, \n  tokenListSelector\n} from '../store/selectors'\nimport { web3AccountLoaded } from '../store/actions'\n\nclass App extends Component {\n  state = {};\n\n  componentDidMount() {\n    this.loadBlockchainData(this.props.dispatch)\n  }\n\n  async loadBlockchainData(dispatch) {\n    try {\n      const web3 = loadWeb3(dispatch)\n      await window.ethereum.enable();\n\n      window.ethereum.on('accountsChanged', function (accounts) {\n        dispatch(web3AccountLoaded(accounts[0]))\n      })\n\n      window.ethereum.on('chainChanged', () => {\n        document.location.reload()\n      })\n\n      // Acccounts now exposed\n      const account = await loadAccount(web3, dispatch)\n      console.log('account', account)\n\n      const network = await web3.eth.net.getNetworkType()\n      console.log('network', network)\n      const networkId = await web3.eth.net.getId()\n      console.log('network id', networkId)\n\n      const exchange = await loadExchange(web3, networkId, dispatch)\n      if (!exchange) {\n        return;\n      }\n    } catch(e) {\n      return;\n    }\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    console.log(\"props\", props)\n    const {\n      token,\n      tokenList,\n      account,\n      exchange,\n      web3,\n      dispatch\n    } = props\n\n    if (token === null && tokenList.length > 0) {\n      selectToken(tokenList[0].tokenAddress, tokenList, account, exchange, web3, dispatch)\n    }\n\n    return state\n  }\n\n  render() {\n\n    \n\n    if (!this.props.exchange) {\n      return (\n        <h3>Waiting to be connected to the {process.env.REACT_APP_NETWORK_NAME} network</h3>\n      )\n    }\n\n    return (\n      <div className={`sb-nav-fixed ${this.props.sideNavShow ? \"\" : \"sb-sidenav-toggled\"}`}>\n\n        <TopNav/>\n\n        <div id=\"layoutSidenav\">\n          <SideNav/>\n          <div id=\"layoutSidenav_content\">\n            <main>\n              <div className=\"container-fluid\">\n                <Routes />\n              </div>\n            </main>\n          </div>\n        </div>\n        \n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    account: accountSelector(state),\n    web3: web3Selector(state),\n    exchange: exchangeSelector(state),\n    contractsLoaded: contractsLoadedSelector(state),\n    sideNavShow: sideNavShowSelector(state),\n    token: tokenSelector(state),\n    tokenList: tokenListSelector(state)\n  }\n}\n\nexport default connect(mapStateToProps)(App);\n","import { combineReducers } from 'redux'\n\nfunction app (state = {}, action) {\n\tswitch (action.type) {\n\t\tcase 'SIDE_NAV_SHOW_HIDE_TOGGLED':\n\t\t\tlet show = state.sideNavShow\n\t\t\tif (show === null || show === undefined) {\n\t\t\t\tshow = true\n\t\t\t}\n\t\t\treturn {...state, sideNavShow: !show}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nfunction web3 (state = {}, action ) {\n\tswitch (action.type) {\n\t\tcase 'WEB3_LOADED':\n\t\t\treturn { ...state, connection: action.connection }\n\t\tcase 'WEB3_ACCOUNT_LOADED':\n\t\t\treturn { ...state, account: action.account }\n\t\tcase 'ETHER_BALANCE_LOADED':\n\t\t\treturn { ...state, balance: action.balance}\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nfunction exchange (state = {}, action ) {\n\tlet index\n\tlet data\n\tswitch (action.type) {\n\t\tcase 'EXCHANGE_LOADED':\n\t\t\treturn { ...state, loaded: true, contract: action.contract, tokens: {data: []}, token: null }\n\t\tcase 'TOKEN_ADDED':\n\t\t\t// prevent duplicates\n\t\t\tindex = state.tokens.data.findIndex(token => token.tokenAddress === action.token.tokenAddress)\n\t\t\n\t\t\tif (index === -1) {\n\t\t\t\tdata = [...state.tokens.data, action.token]\n\t\t\t} else {\n\t\t\t\tdata = state.tokens.data\n\t\t\t}\n\t\t\treturn { \n\t\t\t\t...state,\n\t\t\t\ttokens: {\n\t\t\t\t\t...state.tokens,\n\t\t\t\t\tdata\n\t\t\t\t}\n\t\t\t}\n\t\tcase 'SELECTING_TOKEN': \n\t\t\treturn { ...state, tokenLoading: true }\n\t\tcase 'TOKEN_SELECTED':\n\t\t\treturn { ...state, token: action.token, tokenLoading: false }\n\t\tcase 'TOKEN_BALANCE_LOADED':\n\t\t\treturn { ...state, tokenBalance: action.balance}\n\t\tcase 'EXCHANGE_ETHER_BALANCE_LOADED':\n\t\t\treturn { ...state, exchangeEtherBalance: action.balance}\n\t\tcase 'EXCHANGE_TOKEN_BALANCE_LOADED':\n\t\t\treturn { ...state, exchangeTokenBalance: action.balance}\n\t\tcase 'BALANCES_LOADING':\n\t\t\treturn { ...state, balancesLoading: true} \n\t\tcase 'BALANCES_LOADED':\n\t\t\treturn { ...state, balancesLoading: false} \n\t\tcase 'ETHER_DEPOSIT_AMOUNT_CHANGED':\n\t\t\treturn { ...state, etherDepositAmount: action.amount} \n\t\tcase 'ETHER_WITHDRAW_AMOUNT_CHANGED':\n\t\t\treturn { ...state, etherWithdrawAmount: action.amount} \n\t\tcase 'TOKEN_DEPOSIT_AMOUNT_CHANGED':\n\t\t\treturn { ...state, tokenDepositAmount: action.amount} \n\t\tcase 'TOKEN_WITHDRAW_AMOUNT_CHANGED':\n\t\t\treturn { ...state, tokenWithdrawAmount: action.amount}\n\t\tcase 'BUY_ORDER_AMOUNT_CHANGED':\n\t\t\treturn { ...state, buyOrder: {...state.buyOrder, amount: action.amount } } \n\t\tcase 'BUY_ORDER_PRICE_CHANGED':\n\t\t\treturn { ...state, buyOrder: {...state.buyOrder, price: action.price } } \n\t\tcase 'BUY_ORDER_MAKING':\n\t\t\treturn { ...state, buyOrder: {...state.buyOrder, amount: null, price: null, making: true } } \n\t\tcase 'SELL_ORDER_AMOUNT_CHANGED':\n\t\t\treturn { ...state, sellOrder: {...state.sellOrder, amount: action.amount } } \n\t\tcase 'SELL_ORDER_PRICE_CHANGED':\n\t\t\treturn { ...state, sellOrder: {...state.sellOrder, price: action.price } } \n\t\tcase 'SELL_ORDER_MAKING':\n\t\t\treturn { ...state, sellOrder: {...state.sellOrder, amount: null, price: null, making: true } } \n\t\tcase 'ORDER_MADE':\n\t\t\t// prevent duplicates\n\t\t\tindex = state.allOrders.data.findIndex(order => order.id === action.order.id)\n\t\t\n\t\t\tif (index === -1) {\n\t\t\t\tdata = [...state.allOrders.data, action.order]\n\t\t\t} else {\n\t\t\t\tdata = state.allOrders.data\n\t\t\t}\n\t\t\treturn { \n\t\t\t\t...state, \n\t\t\t\tbuyOrder: {\n\t\t\t\t\t...state.buyOrder,\n\t\t\t\t\tmaking: false\n\t\t\t\t},\n\t\t\t\tsellOrder: {\n\t\t\t\t\t...state.sellOrder,\n\t\t\t\t\tmaking: false\n\t\t\t\t},\n\t\t\t\tallOrders: {\n\t\t\t\t\t...state.allOrders,\n\t\t\t\t\tdata\n\t\t\t\t}} \n\t\tcase 'CANCELLED_ORDERS_LOADED':\n\t\t\treturn { ...state, cancelledOrders: {loaded: true, data: action.cancelledOrders }}\n\t\tcase 'FILLED_ORDERS_LOADED':\n\t\t\treturn { ...state, filledOrders: {loaded: true, data: action.filledOrders }} \n\t\tcase 'ALL_ORDERS_LOADED':\n\t\t\treturn { ...state, allOrders: {loaded: true, data: action.allOrders }} \n\t\tcase 'ORDER_CANCELLING':\n\t\t\treturn { ...state, orderCancelling: true} \n\t\tcase 'ORDER_CANCELLED':\n\t\t\treturn { \n\t\t\t\t...state, \n\t\t\t\torderCancelling: false,\n\t\t\t\tcancelledOrders: {\n\t\t\t\t\t...state.cancelledOrders,\n\t\t\t\t\tdata: [\n\t\t\t\t\t\t...state.cancelledOrders.data,\n\t\t\t\t\t\taction.order\n\t\t\t\t\t]\n\t\t\t\t}} \n\t\tcase 'ORDER_FILLING':\n\t\t\treturn { ...state, orderFilling: true} \n\t\tcase 'ORDER_FILLED':\n\t\t\t// prevent duplicates\n\t\t\tindex = state.filledOrders.data.findIndex(order => order.id === action.order.id)\n\t\t\tif (index === -1) {\n\t\t\t\tdata = [...state.filledOrders.data, action.order]\n\t\t\t} else {\n\t\t\t\tdata = state.filledOrders.data\n\t\t\t}\n\t\t\treturn { \n\t\t\t\t...state, \n\t\t\t\torderFilling: false,\n\t\t\t\tfilledOrders: {\n\t\t\t\t\t...state.filledOrders,\n\t\t\t\t\tdata\n\t\t\t\t}} \n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nconst rootReducer = combineReducers({\n\tapp,\n\tweb3,\n\texchange\n})\n\nexport default rootReducer","import { createStore, applyMiddleware, compose } from 'redux'\nimport { createLogger } from 'redux-logger'\nimport rootReducer from './reducers'\n\nconst loggerMiddleware = createLogger()\nconst middleware = []\n\n// for reduc devtools\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\n\nexport default function configureStore ( preloadedState ) {\n\treturn createStore (\n\t\trootReducer,\n\t\tpreloadedState,\n\t\tcomposeEnhancers (applyMiddleware (...middleware, loggerMiddleware))\n\t)\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux'\n// import 'bootstrap/dist/css/bootstrap.min.css'\nimport App from './components/App'\nimport configureStore from './store/configureStore'\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n\t<Provider store = {configureStore()}>\n\t\t<Router basename={process.env.PUBLIC_URL}>\n\t\t\t<App />\n\t\t</Router>\n\t</Provider>, \n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}